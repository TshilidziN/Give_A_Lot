{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Tshilidzi-PC\\\\Documents\\\\GitHub\\\\Givee\\\\Give-a-Lot\\\\frontend\\\\givealot\\\\src\\\\views\\\\browse\\\\Browse.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useContext } from 'react';\n/* assets import */\n\nimport filterBtn_mobile from \"../../assets/filter_list_black_24dp.svg\";\nimport ui_message_art from '../../assets/feedback-2044700_1280.jpg';\n/* assets import end */\n\n/* components import */\n\nimport Organisation from './Components/Organisation/Organisation';\nimport OrganisationRecommended from './Components/Organisation/OrganisationRecommended';\nimport Sector from \"./Components/BrowseBySector/Sector\";\nimport Navbar from \"./Components/Navbar/Navbar\";\nimport Footer from \"./Components/Footer/Footer\";\nimport Loader from \"../loader/Loader\";\n/* components import end */\n\n/*css imports */\n\nimport browse_general from './Styles/browse_general.css';\nimport browse_desktop from './Styles/browse_desktop.css';\nimport { ApiContext } from \"../../apiContext/ApiContext\";\nimport Chatbot from \"../chatbot/Chatbot\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction Browse() {\n  _s();\n\n  const [organisations, setOrganisations] = useState([]);\n  const [recommendedOrganisations, setRecommendedOrganisations] = useState([]);\n  const [pageLoaded, setPageLoaded] = React.useState(false);\n  const [serverDomain, setServerDomain] = useState(useContext(ApiContext));\n\n  const mobile_popUpControl_hide = event => {\n    event.preventDefault();\n    var dark_backdrop_active_for_mobile = document.getElementById(\"dark_backdrop_active_for_mobile\");\n    var browse_filters = document.getElementById(\"browse_filters\");\n    dark_backdrop_active_for_mobile.style.display = \"none\";\n    browse_filters.style.display = \"none\";\n  };\n\n  const mobile_popUpControl_display = event => {\n    event.preventDefault();\n    var dark_backdrop_active_for_mobile = document.getElementById(\"dark_backdrop_active_for_mobile\");\n    var browse_filters = document.getElementById(\"browse_filters\");\n    dark_backdrop_active_for_mobile.style.display = \"block\";\n    browse_filters.style.display = \"block\";\n  };\n  /* fetch request - organisations by sections - start*/\n\n  /* \r\n      REMEMBER HOOKS: ELSE GOOD LUCK TRYING TO SOLVE THE \r\n                      INEVITABLE SHIT SHOW. \r\n        TODO: update login to use tokens on the request URL\r\n  */\n\n\n  useEffect(() => {\n    fetch(serverDomain + \"/v1/browse/sectors\").then(async response => {\n      const data = await response.json();\n\n      if (!response.ok)\n        /* error handling here */\n        {\n          if (response.status === 500) {\n            window.location.assign(\"/browse\");\n          } else if (response.status === 401) {\n            alert(\"this token is unauthorized\");\n            /* take them back to login */\n          }\n\n          if (typeof data !== 'undefined') {}\n        }\n\n      if (data.message === \"success\")\n        /*successfully fetched*/\n        {\n          setOrganisations(data.object);\n          setPageLoaded(true);\n        } else {\n        alert(\"error occured: \" + data.code);\n        setOrganisations([]);\n      }\n    }).catch(error => {\n      alert(\"failed - organisations - sector\");\n    });\n  }, []);\n  /* fetch request - organisations by sections - end*/\n\n  let organisations_by_sector = [];\n\n  if (organisations !== undefined) {\n    for (let i = 0; i < organisations.length; i++) {\n      let sector = organisations[i].sector;\n      let organisations_for_the_sector = [];\n\n      for (let k = 0; k < organisations[i].organisations.length; k++) {\n        let orgId = organisations[i].organisations[k].orgId;\n        let orgName = organisations[i].organisations[k].orgName;\n        let dateAdded = organisations[i].organisations[k].dateAdded;\n        let imgUrl = organisations[i].organisations[k].imgUrl;\n        let orgDescription = organisations[i].organisations[k].orgDescription;\n        let certificate_level = organisations[i].organisations[k].certificate_level;\n        organisations_for_the_sector.push( /*#__PURE__*/_jsxDEV(Organisation, {\n          orgId: orgId,\n          orgName: orgName,\n          dateAdded: dateAdded,\n          imgUrl: imgUrl,\n          certificate_level: certificate_level,\n          orgDescription: orgDescription\n        }, orgId, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 51\n        }, this));\n      }\n      /*\r\n        Note for future reference: sector takes a list of organisations as prop\r\n      */\n\n\n      organisations_by_sector.push( /*#__PURE__*/_jsxDEV(Sector, {\n        sector: sector,\n        organisations_for_sec: organisations_for_the_sector\n      }, sector, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 42\n      }, this));\n    }\n  }\n  /* fetch request - recommended - start*/\n\n  /*\r\n      REMEMBER HOOKS: ELSE GOOD LUCK TRYING TO SOLVE THE\r\n                      INEVITABLE SHIT SHOW.\r\n        TODO: update login to use tokens on the request URL\r\n  */\n\n\n  let user_id = \"default\";\n  /*TODO: pull this id from dom storage, if user is not logged in, use default*/\n\n  useEffect(() => {\n    fetch(serverDomain + \"/v1/browse/sectors/recommendations/\" + user_id).then(async response => {\n      const data = await response.json();\n\n      if (!response.ok)\n        /* error handling here */\n        {\n          if (response.status === 500) {\n            alert(\"bad parameters, fatal\");\n          } else if (response.status === 401) {\n            alert(\"this token is unauthorized\");\n            /* take them back to login */\n          }\n\n          if (typeof data !== 'undefined') {\n            alert(data.message);\n          }\n        }\n\n      if (data.message === \"success\")\n        /*successfully fetched*/\n        {\n          setRecommendedOrganisations(data.object);\n        } else {\n        alert(\"error occured: \" + data.code);\n        setRecommendedOrganisations([]);\n      }\n    }).catch(error => {\n      alert(\"failed - organisations - recommendations\");\n    });\n  }, []);\n  /* fetch request - recommended - end*/\n\n  let organisations_recommended = [];\n\n  if (recommendedOrganisations !== undefined) {\n    for (let k = 0; k < recommendedOrganisations.length; k++) {\n      let orgId = recommendedOrganisations[k].orgId;\n      let orgName = recommendedOrganisations[k].orgName;\n      let dateAdded = recommendedOrganisations[k].dateAdded;\n      let imgUrl = recommendedOrganisations[k].imgUrl;\n      let certificate_level = recommendedOrganisations[k].certificate_level;\n      let org_sector = recommendedOrganisations[k].sector;\n      let orgDescription = recommendedOrganisations[k].orgDescription;\n      organisations_recommended.push( /*#__PURE__*/_jsxDEV(OrganisationRecommended, {\n        orgId: orgId,\n        orgName: orgName,\n        dateAdded: dateAdded,\n        imgUrl: imgUrl,\n        certificate_level: certificate_level,\n        org_sector: org_sector,\n        orgDescription: orgDescription\n      }, orgId, false, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 44\n      }, this));\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"main_browse_page\",\n    children: [pageLoaded === false && /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 38\n    }, this), /*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"browse_body\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"dark_backdrop_active_for_mobile\",\n        onClick: mobile_popUpControl_hide\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"filters_mobile\",\n        onClick: mobile_popUpControl_display,\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"filters\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: filterBtn_mobile,\n          alt: \"filter-icon\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 36\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        id: \"browse_body_main\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"browse_organisations\",\n          children: [organisations_recommended.length > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"browse_sector\",\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"browse_sector_name\",\n                children: \"recommended for you\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 234,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 233,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"reco_organisations\",\n              children: organisations_recommended\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 236,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true), organisations_by_sector.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"ui_element_message\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: ui_message_art,\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 244,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"ui_element_message_text\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                id: \"ui_element_message_head\",\n                children: \"Find a cause that you care about\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 246,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                id: \"ui_element_message_subtext\",\n                children: [\"The following organisations have been individually reviewed by Give A Lot\", /*#__PURE__*/_jsxDEV(\"img\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 248,\n                  columnNumber: 59\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 247,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 245,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"default_organisations\",\n            children: organisations_by_sector\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 25\n          }, this), organisations_by_sector.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"ui_element_message\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: ui_message_art,\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"ui_element_message_text\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                id: \"ui_element_message_head\",\n                children: \"Find a cause that you care about\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 262,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                id: \"ui_element_message_subtext\",\n                children: [\"The following organisations have been individually reviewed by Give A Lot\", /*#__PURE__*/_jsxDEV(\"img\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 264,\n                  columnNumber: 59\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 263,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 211,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Browse, \"9xPlw07bYAYeVBOQXrdyppMBFx0=\");\n\n_c = Browse;\nexport default Browse;\n\nvar _c;\n\n$RefreshReg$(_c, \"Browse\");","map":{"version":3,"sources":["C:/Users/Tshilidzi-PC/Documents/GitHub/Givee/Give-a-Lot/frontend/givealot/src/views/browse/Browse.js"],"names":["React","useState","useEffect","useContext","ui_message_art","Organisation","OrganisationRecommended","Sector","Navbar","Footer","Loader","browse_general","browse_desktop","ApiContext","Chatbot","Browse","organisations","setOrganisations","recommendedOrganisations","setRecommendedOrganisations","pageLoaded","setPageLoaded","serverDomain","setServerDomain","mobile_popUpControl_hide","event","preventDefault","dark_backdrop_active_for_mobile","document","getElementById","browse_filters","style","display","mobile_popUpControl_display","fetch","then","response","data","json","ok","status","window","location","assign","alert","message","object","code","catch","error","organisations_by_sector","undefined","i","length","sector","organisations_for_the_sector","k","orgId","orgName","dateAdded","imgUrl","orgDescription","certificate_level","push","user_id","organisations_recommended","org_sector","filterBtn_mobile"],"mappings":"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","sourcesContent":["import React, {useState, useEffect, useContext} from 'react';\r\n\r\n/* assets import */\r\nimport filterBtn_mobile from '../../assets/filter_list_black_24dp.svg';\r\nimport ui_message_art from '../../assets/feedback-2044700_1280.jpg';\r\n/* assets import end */\r\n\r\n/* components import */\r\nimport Organisation from './Components/Organisation/Organisation';\r\nimport OrganisationRecommended from './Components/Organisation/OrganisationRecommended';\r\nimport Sector from \"./Components/BrowseBySector/Sector\";\r\nimport Navbar from \"./Components/Navbar/Navbar\";\r\nimport Footer from \"./Components/Footer/Footer\";\r\nimport Loader from \"../loader/Loader\";\r\n/* components import end */\r\n\r\n/*css imports */\r\nimport browse_general from './Styles/browse_general.css';\r\nimport browse_desktop from './Styles/browse_desktop.css';\r\nimport {ApiContext} from \"../../apiContext/ApiContext\";\r\nimport Chatbot from \"../chatbot/Chatbot\";\r\n\r\n\r\nfunction Browse ()\r\n{\r\n    const [organisations, setOrganisations] = useState([]);\r\n    const [recommendedOrganisations, setRecommendedOrganisations] = useState([]);\r\n    const [pageLoaded, setPageLoaded] = React.useState(false);\r\n    const [serverDomain, setServerDomain] = useState(useContext(ApiContext))\r\n\r\n    const mobile_popUpControl_hide = event =>\r\n    {\r\n        event.preventDefault();\r\n        var dark_backdrop_active_for_mobile = document.getElementById(\"dark_backdrop_active_for_mobile\");\r\n        var browse_filters = document.getElementById(\"browse_filters\");\r\n\r\n        dark_backdrop_active_for_mobile.style.display = \"none\";\r\n        browse_filters.style.display = \"none\";\r\n    }\r\n\r\n    const mobile_popUpControl_display = event =>\r\n    {\r\n        event.preventDefault();\r\n        var dark_backdrop_active_for_mobile = document.getElementById(\"dark_backdrop_active_for_mobile\");\r\n        var browse_filters = document.getElementById(\"browse_filters\");\r\n\r\n        dark_backdrop_active_for_mobile.style.display = \"block\";\r\n        browse_filters.style.display = \"block\";\r\n    }\r\n\r\n    /* fetch request - organisations by sections - start*/\r\n\r\n    /* \r\n        REMEMBER HOOKS: ELSE GOOD LUCK TRYING TO SOLVE THE \r\n                        INEVITABLE SHIT SHOW. \r\n\r\n        TODO: update login to use tokens on the request URL\r\n    */\r\n    useEffect(() => {\r\n        fetch( serverDomain + \"/v1/browse/sectors\")\r\n        .then(async response =>{\r\n\r\n            const data = await response.json();\r\n\r\n            if(!response.ok) /* error handling here */\r\n            {            \r\n                if(response.status === 500)\r\n                {\r\n                    window.location.assign(\"/browse\");\r\n                }\r\n                else if(response.status === 401)\r\n                {\r\n                    alert(\"this token is unauthorized\"); /* take them back to login */\r\n                }\r\n\r\n                if(typeof data !== 'undefined')\r\n                {\r\n\r\n                }\r\n            }\r\n\r\n            if(data.message === \"success\") /*successfully fetched*/\r\n            {\r\n                setOrganisations(data.object);\r\n                setPageLoaded(true);\r\n            }\r\n            else\r\n            {\r\n                alert(\"error occured: \" + data.code);\r\n                setOrganisations([]);\r\n            }\r\n        })\r\n        \r\n        .catch(error => {\r\n            alert(\"failed - organisations - sector\")\r\n        });\r\n    }\r\n    ,[])\r\n    /* fetch request - organisations by sections - end*/\r\n\r\n    let organisations_by_sector = [];\r\n    if(organisations !== undefined)\r\n    {\r\n        for (let i = 0; i < organisations.length; i++)\r\n        {\r\n            let sector = organisations[i].sector;\r\n            let organisations_for_the_sector = [];\r\n\r\n            for (let k = 0; k < organisations[i].organisations.length; k++)\r\n            {\r\n                let orgId = organisations[i].organisations[k].orgId;\r\n                let orgName = organisations[i].organisations[k].orgName;\r\n                let dateAdded = organisations[i].organisations[k].dateAdded;\r\n                let imgUrl = organisations[i].organisations[k].imgUrl;\r\n                let orgDescription = organisations[i].organisations[k].orgDescription;\r\n                let certificate_level = organisations[i].organisations[k].certificate_level;\r\n\r\n                organisations_for_the_sector.push(<Organisation orgId = {orgId}\r\n                                                                orgName= {orgName}\r\n                                                                dateAdded = {dateAdded}\r\n                                                                imgUrl = {imgUrl}\r\n                                                                certificate_level = {certificate_level}\r\n                                                                orgDescription = {orgDescription}\r\n                                                                key={orgId}/>);\r\n            }\r\n            /*\r\n              Note for future reference: sector takes a list of organisations as prop\r\n            */\r\n\r\n            organisations_by_sector.push(<Sector sector={sector}\r\n                                                 organisations_for_sec={organisations_for_the_sector}\r\n                                                 key={sector}/>);\r\n        }\r\n    }\r\n\r\n    /* fetch request - recommended - start*/\r\n    /*\r\n        REMEMBER HOOKS: ELSE GOOD LUCK TRYING TO SOLVE THE\r\n                        INEVITABLE SHIT SHOW.\r\n\r\n        TODO: update login to use tokens on the request URL\r\n    */\r\n    let user_id = \"default\"; /*TODO: pull this id from dom storage, if user is not logged in, use default*/\r\n\r\n    useEffect(() => {\r\n            fetch(serverDomain + \"/v1/browse/sectors/recommendations/\"+user_id)\r\n                .then(async response =>{\r\n\r\n                    const data = await response.json();\r\n\r\n                    if(!response.ok) /* error handling here */\r\n                    {\r\n                        if(response.status === 500)\r\n                        {\r\n                            alert(\"bad parameters, fatal\");\r\n                        }\r\n                        else if(response.status === 401)\r\n                        {\r\n                            alert(\"this token is unauthorized\"); /* take them back to login */\r\n                        }\r\n\r\n                        if(typeof data !== 'undefined')\r\n                        {\r\n                            alert(data.message);\r\n                        }\r\n                    }\r\n\r\n                    if(data.message === \"success\") /*successfully fetched*/\r\n                    {\r\n                        setRecommendedOrganisations(data.object);\r\n                    }\r\n                    else\r\n                    {\r\n                        alert(\"error occured: \" + data.code);\r\n                        setRecommendedOrganisations([]);\r\n                    }\r\n                })\r\n\r\n                .catch(error => {\r\n                    alert(\"failed - organisations - recommendations\")\r\n                });\r\n        }\r\n        ,[])\r\n    /* fetch request - recommended - end*/\r\n\r\n    let organisations_recommended = [];\r\n    if(recommendedOrganisations !== undefined)\r\n    {\r\n\r\n        for (let k = 0; k < recommendedOrganisations.length; k++)\r\n        {\r\n            let orgId = recommendedOrganisations[k].orgId;\r\n            let orgName = recommendedOrganisations[k].orgName;\r\n            let dateAdded = recommendedOrganisations[k].dateAdded;\r\n            let imgUrl = recommendedOrganisations[k].imgUrl;\r\n            let certificate_level = recommendedOrganisations[k].certificate_level;\r\n            let org_sector = recommendedOrganisations[k].sector;\r\n            let orgDescription = recommendedOrganisations[k].orgDescription;\r\n\r\n            organisations_recommended.push(<OrganisationRecommended orgId = {orgId}\r\n                                                                    orgName= {orgName}\r\n                                                                    dateAdded = {dateAdded}\r\n                                                                    imgUrl = {imgUrl}\r\n                                                                    certificate_level = {certificate_level}\r\n                                                                    org_sector = {org_sector}\r\n                                                                    orgDescription = {orgDescription}\r\n                                                                    key={orgId}/>);\r\n        }\r\n    }\r\n    return (\r\n        <div id={\"main_browse_page\"}>\r\n\r\n            {pageLoaded === false && <Loader />}\r\n            <Navbar/>\r\n\r\n            <div id=\"browse_body\">\r\n\r\n                <div id=\"dark_backdrop_active_for_mobile\" onClick={mobile_popUpControl_hide}>\r\n                    {/*this is used on the mobile version of the application,\r\n                       helps minimise the the filters */}\r\n                </div>\r\n\r\n                <div id=\"filters_mobile\" onClick={mobile_popUpControl_display}>\r\n                    <p >filters</p><img  src={filterBtn_mobile} alt={\"filter-icon\"} />\r\n                </div>\r\n                \r\n                <section id=\"browse_body_main\">\r\n                    <div id=\"browse_organisations\">\r\n\r\n\r\n                        {organisations_recommended.length > 0 &&\r\n                            <>\r\n                                <div className=\"browse_sector\">\r\n                                    <p className=\"browse_sector_name\">recommended for you</p>\r\n                                </div>\r\n                                <div id=\"reco_organisations\">\r\n                                    {organisations_recommended}\r\n                                </div>\r\n                            </>\r\n                        }\r\n\r\n                        {organisations_by_sector.length > 0 &&\r\n                            <div id=\"ui_element_message\">\r\n                            <img src={ui_message_art} alt={\"\"}/>\r\n                            <div id=\"ui_element_message_text\">\r\n                                <p id=\"ui_element_message_head\">Find a cause that you care about</p>\r\n                                <p id=\"ui_element_message_subtext\">The following organisations have been individually\r\n                                    reviewed by Give A Lot<img/></p>\r\n                            </div>\r\n                        </div>}\r\n\r\n                        <div id=\"default_organisations\">\r\n                            {organisations_by_sector}\r\n                        </div>\r\n\r\n                        {/* this block was not a part of the initial design */}\r\n\r\n                        {organisations_by_sector.length > 0 &&\r\n                        <div id=\"ui_element_message\">\r\n                            <img src={ui_message_art} alt={\"\"}/>\r\n                            <div id=\"ui_element_message_text\">\r\n                                    <p id=\"ui_element_message_head\">Find a cause that you care about</p>\r\n                                    <p id=\"ui_element_message_subtext\">The following organisations have been individually\r\n                                    reviewed by Give A Lot<img/></p>\r\n                            </div>\r\n                            </div>\r\n                        }\r\n                        {/* this block was not a part of the initial design - end */}\r\n                    </div>\r\n                </section>\r\n\r\n                <Footer/>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Browse;"]},"metadata":{},"sourceType":"module"}