{"ast":null,"code":"import _objectSpread from\"C:/Users/Tshilidzi-PC/Documents/GitHub/Givee/Give-a-Lot/frontend/givealot/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"C:/Users/Tshilidzi-PC/Documents/GitHub/Givee/Give-a-Lot/frontend/givealot/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"C:/Users/Tshilidzi-PC/Documents/GitHub/Givee/Give-a-Lot/frontend/givealot/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/Tshilidzi-PC/Documents/GitHub/Givee/Give-a-Lot/frontend/givealot/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:/Users/Tshilidzi-PC/Documents/GitHub/Givee/Give-a-Lot/frontend/givealot/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:/Users/Tshilidzi-PC/Documents/GitHub/Givee/Give-a-Lot/frontend/givealot/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/Tshilidzi-PC/Documents/GitHub/Givee/Give-a-Lot/frontend/givealot/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import*as React from'react';import Paper from'@material-ui/core/Paper';import{ViewState,EditingState}from'@devexpress/dx-react-scheduler';import\"../Calendar/styles/Calendar.css\";import{Scheduler,Appointments,AppointmentForm,AppointmentTooltip,WeekView,MonthView,EditRecurrenceMenu,AllDayPanel,ConfirmationDialog}from'@devexpress/dx-react-scheduler-material-ui';import axios from\"axios\";import OrgSidebar from\"../DemoSidebar/OrgSidebar\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var OrgCalendar=/*#__PURE__*/function(_React$PureComponent){_inherits(OrgCalendar,_React$PureComponent);var _super=_createSuper(OrgCalendar);function OrgCalendar(props){var _this;_classCallCheck(this,OrgCalendar);_this=_super.call(this,props);_this.state={data:[],currentDate:new Date().toDateString(),email:localStorage.getItem('curr_user_email'),eventAdded:false,addedAppointment:{},appointmentChanges:{},editingAppointment:undefined,serverDomain:'https://givealotcharities.herokuapp.com'};_this.commitChanges=_this.commitChanges.bind(_assertThisInitialized(_this));_this.changeAddedAppointment=_this.changeAddedAppointment.bind(_assertThisInitialized(_this));_this.changeAppointmentChanges=_this.changeAppointmentChanges.bind(_assertThisInitialized(_this));_this.changeEditingAppointment=_this.changeEditingAppointment.bind(_assertThisInitialized(_this));return _this;}_createClass(OrgCalendar,[{key:\"changeAddedAppointment\",value:function changeAddedAppointment(addedAppointment){this.setState({addedAppointment:addedAppointment});}},{key:\"changeAppointmentChanges\",value:function changeAppointmentChanges(appointmentChanges){this.setState({appointmentChanges:appointmentChanges});}},{key:\"changeEditingAppointment\",value:function changeEditingAppointment(editingAppointment){this.setState({editingAppointment:editingAppointment});}},{key:\"commitChanges\",value:function commitChanges(_ref){var _this2=this;var added=_ref.added,changed=_ref.changed,deleted=_ref.deleted;this.setState(function(state){var data=state.data;console.log(data);if(added){var startingAddedId=data.length>0?data[data.length-1].id+1:0;data=[].concat(_toConsumableArray(data),[_objectSpread({id:startingAddedId},added)]);var startTime=data[data.length-1].startDate.toString().split(\" \")[4];var endTime=data[data.length-1].endDate.toString().split(\" \")[4];var title=data[data.length-1].title;var description=data[data.length-1].notes;var startDateYear=data[data.length-1].startDate.toString().split(\" \")[3];var startDateMonth=data[data.length-1].startDate.toString().split(\" \")[1];var startDateDay=data[data.length-1].startDate.toString().split(\" \")[2];var eventStartDate=startDateYear+'-'+startDateMonth+'-'+startDateDay;var endDateYear=data[data.length-1].endDate.toString().split(\" \")[3];var endDateMonth=data[data.length-1].endDate.toString().split(\" \")[1];var endDateDay=data[data.length-1].endDate.toString().split(\" \")[2];var eventEndDate=endDateYear+'-'+endDateMonth+'-'+endDateDay;var eventDayAndTime={eventTitle:title,eventDescription:description,eventStartTime:startTime,eventEndTime:endTime,eventStartDate:eventStartDate,eventEndDate:eventEndDate,userEmail:_this2.state.email};var config={headers:{\"Content-Type\":\"application/json\",'Access-Control-Allow-Origin':'*'}};axios.post(_this2.state.serverDomain+'/event/calender/add',eventDayAndTime,config).then(function(response){}).catch(function(error){console.log(error);});}if(changed){data=data.map(function(appointment){return changed[appointment.id]?_objectSpread(_objectSpread({},appointment),changed[appointment.id]):appointment;});var testing=changed.undefined;if(testing.title!==undefined){var _config={headers:{\"Content-Type\":\"application/json\",'Access-Control-Allow-Origin':'*'}};var eventId=data[data.length-1].eventId;var titleUpdate={\"userEmail\":_this2.state.email,\"eventId\":eventId,\"newTitle\":testing.title};axios.post(_this2.state.serverDomain+'/event/calender/edit/title',titleUpdate,_config).then(function(response){}).catch(function(error){console.log(error);});}if(testing.startDate!==undefined){var _config2={headers:{\"Content-Type\":\"application/json\",'Access-Control-Allow-Origin':'*'}};var _startDateMonth=testing.startDate.toString().split(\" \")[1];var _startDateYear=testing.startDate.toString().split(\" \")[3];var _startDateDay=testing.startDate.toString().split(\" \")[2];var _eventStartDate=_startDateYear+'-'+_startDateMonth+'-'+_startDateDay;var _eventId=data[data.length-1].eventId;var startDateUpdate={\"userEmail\":_this2.state.email,\"eventId\":_eventId,\"newDate\":_eventStartDate};axios.post(_this2.state.serverDomain+'/event/calender/edit/date/start',startDateUpdate,_config2).then(function(response){}).catch(function(error){console.log(error);});}if(testing.endDate!==undefined){var _config3={headers:{\"Content-Type\":\"application/json\",'Access-Control-Allow-Origin':'*'}};var _endDateMonth=testing.endDate.toString().split(\" \")[1];var _endDateYear=testing.endDate.toString().split(\" \")[3];var _endDateDay=testing.endDate.toString().split(\" \")[2];var _eventEndDate=_endDateYear+'-'+_endDateMonth+'-'+_endDateDay;var _eventId2=data[data.length-1].eventId;var endDateUpdate={\"userEmail\":_this2.state.email,\"eventId\":_eventId2,\"newDate\":_eventEndDate};axios.post(_this2.state.serverDomain+'/event/calender/edit/date/end',endDateUpdate,_config3).then(function(response){}).catch(function(error){console.log(error);});}if(testing.startDate!==undefined){var _startTime=testing.startDate.toString().split(\" \")[4];var _config4={headers:{\"Content-Type\":\"application/json\",'Access-Control-Allow-Origin':'*'}};var _eventId3=data[data.length-1].eventId;var startTimeUpdate={\"userEmail\":_this2.state.email,\"eventId\":_eventId3,\"newTime\":_startTime};axios.post(_this2.state.serverDomain+'/event/calender/edit/time/start',startTimeUpdate,_config4).then(function(response){}).catch(function(error){console.log(error);});}if(testing.endDate!==undefined){var _endTime=testing.endDate.toString().split(\" \")[4];var _config5={headers:{\"Content-Type\":\"application/json\",'Access-Control-Allow-Origin':'*'}};var _eventId4=data[data.length-1].eventId;var endTimeUpdate={\"userEmail\":_this2.state.email,\"eventId\":_eventId4,\"newTime\":_endTime};console.log(endTimeUpdate);axios.post(_this2.state.serverDomain+'/event/calender/edit/time/end',endTimeUpdate,_config5).then(function(response){}).catch(function(error){console.log(error);});}if(testing.notes!==undefined){var _config6={headers:{\"Content-Type\":\"application/json\",'Access-Control-Allow-Origin':'*'}};var _eventId5=data[data.length-1].eventId;var descriptionUpdate={\"userEmail\":_this2.state.email,\"eventId\":_eventId5,\"newDescription\":testing.notes};console.log(descriptionUpdate);axios.post(_this2.state.serverDomain+'/event/calender/edit/description',descriptionUpdate,_config6).then(function(response){}).catch(function(error){console.log(error);});}}if(deleted!==undefined){data=data.filter(function(appointment){return appointment.id!==deleted;});}return{data:data};});}},{key:\"componentDidMount\",value:function componentDidMount(){this.getEvents();}},{key:\"getEvents\",value:function getEvents(){var _this3=this;var config={headers:{\"Content-Type\":\"application/json\",'Access-Control-Allow-Origin':'*'}};axios.get(this.state.serverDomain+'/event/get/calender/'+this.state.email,config).then(function(response){_this3.setState({data:response.data.object});}).catch(function(error){console.log(error);});}},{key:\"render\",value:function render(){var _this$state=this.state,currentDate=_this$state.currentDate,data=_this$state.data,addedAppointment=_this$state.addedAppointment,appointmentChanges=_this$state.appointmentChanges,editingAppointment=_this$state.editingAppointment;return/*#__PURE__*/_jsxs(\"div\",{className:\"trythis\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(OrgSidebar,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"calendar\",children:/*#__PURE__*/_jsx(Paper,{children:/*#__PURE__*/_jsxs(Scheduler,{data:data,height:660,remoteFiltering:true,children:[/*#__PURE__*/_jsx(ViewState,{currentDate:currentDate}),/*#__PURE__*/_jsx(EditingState,{onCommitChanges:this.commitChanges,addedAppointment:addedAppointment,onAddedAppointmentChange:this.changeAddedAppointment,appointmentChanges:appointmentChanges,onAppointmentChangesChange:this.changeAppointmentChanges,editingAppointment:editingAppointment,onEditingAppointmentChange:this.changeEditingAppointment}),/*#__PURE__*/_jsx(MonthView,{}),/*#__PURE__*/_jsx(AllDayPanel,{}),/*#__PURE__*/_jsx(EditRecurrenceMenu,{}),/*#__PURE__*/_jsx(ConfirmationDialog,{}),/*#__PURE__*/_jsx(Appointments,{}),/*#__PURE__*/_jsx(AppointmentTooltip,{showOpenButton:true,showDeleteButton:true}),/*#__PURE__*/_jsx(AppointmentForm,{})]})})})]});}}]);return OrgCalendar;}(React.PureComponent);export{OrgCalendar as default};","map":{"version":3,"sources":["C:/Users/Tshilidzi-PC/Documents/GitHub/Givee/Give-a-Lot/frontend/givealot/src/views/dashboard/sidebar/Components/OrgCalender/OrgCalendar.js"],"names":["React","Paper","ViewState","EditingState","Scheduler","Appointments","AppointmentForm","AppointmentTooltip","WeekView","MonthView","EditRecurrenceMenu","AllDayPanel","ConfirmationDialog","axios","OrgSidebar","OrgCalendar","props","state","data","currentDate","Date","toDateString","email","localStorage","getItem","eventAdded","addedAppointment","appointmentChanges","editingAppointment","undefined","serverDomain","commitChanges","bind","changeAddedAppointment","changeAppointmentChanges","changeEditingAppointment","setState","added","changed","deleted","console","log","startingAddedId","length","id","startTime","startDate","toString","split","endTime","endDate","title","description","notes","startDateYear","startDateMonth","startDateDay","eventStartDate","endDateYear","endDateMonth","endDateDay","eventEndDate","eventDayAndTime","eventTitle","eventDescription","eventStartTime","eventEndTime","userEmail","config","headers","post","then","response","catch","error","map","appointment","testing","eventId","titleUpdate","startDateUpdate","endDateUpdate","startTimeUpdate","endTimeUpdate","descriptionUpdate","filter","getEvents","get","object","PureComponent"],"mappings":"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","sourcesContent":["import * as React from 'react';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport { ViewState, EditingState } from '@devexpress/dx-react-scheduler';\r\nimport \"../Calendar/styles/Calendar.css\"\r\nimport {\r\n    Scheduler,\r\n    Appointments,\r\n    AppointmentForm,\r\n    AppointmentTooltip,\r\n    WeekView,\r\n    MonthView,\r\n    EditRecurrenceMenu,\r\n    AllDayPanel,\r\n    ConfirmationDialog,\r\n} from '@devexpress/dx-react-scheduler-material-ui';\r\nimport axios from \"axios\";\r\nimport OrgSidebar from \"../DemoSidebar/OrgSidebar\";\r\n\r\nexport default class OrgCalendar extends React.PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            data: [],\r\n            currentDate: new Date().toDateString(),\r\n            email: localStorage.getItem('curr_user_email'),\r\n            eventAdded: false,\r\n            addedAppointment: {},\r\n            appointmentChanges: {},\r\n            editingAppointment: undefined,\r\n            serverDomain : 'https://givealotcharities.herokuapp.com'\r\n        };\r\n\r\n        this.commitChanges = this.commitChanges.bind(this);\r\n        this.changeAddedAppointment = this.changeAddedAppointment.bind(this);\r\n        this.changeAppointmentChanges = this.changeAppointmentChanges.bind(this);\r\n        this.changeEditingAppointment = this.changeEditingAppointment.bind(this);\r\n    }\r\n\r\n    changeAddedAppointment(addedAppointment) {\r\n        this.setState({ addedAppointment });\r\n    }\r\n\r\n    changeAppointmentChanges(appointmentChanges) {\r\n        this.setState({ appointmentChanges });\r\n    }\r\n\r\n    changeEditingAppointment(editingAppointment) {\r\n        this.setState({ editingAppointment });\r\n    }\r\n\r\n    commitChanges({ added, changed, deleted }) {\r\n\r\n        this.setState((state) => {\r\n            let { data } = state;\r\n            console.log(data)\r\n\r\n            if (added) {\r\n                const startingAddedId = data.length > 0 ? data[data.length - 1].id + 1 : 0;\r\n                data = [...data, { id: startingAddedId, ...added }];\r\n                let startTime = data[data.length-1].startDate.toString().split(\" \")[4];\r\n                let endTime = data[data.length-1].endDate.toString().split(\" \")[4];\r\n                let title = data[data.length-1].title;\r\n                let description = data[data.length-1].notes;\r\n                let startDateYear = data[data.length-1].startDate.toString().split(\" \")[3];\r\n                let startDateMonth = data[data.length-1].startDate.toString().split(\" \")[1];\r\n                let startDateDay = data[data.length-1].startDate.toString().split(\" \")[2];\r\n                let eventStartDate = startDateYear +'-' + startDateMonth + '-' + startDateDay;\r\n\r\n                let endDateYear = data[data.length-1].endDate.toString().split(\" \")[3];\r\n                let endDateMonth = data[data.length-1].endDate.toString().split(\" \")[1];\r\n                let endDateDay = data[data.length-1].endDate.toString().split(\" \")[2];\r\n                let eventEndDate = endDateYear +'-' + endDateMonth + '-' + endDateDay;\r\n\r\n                const eventDayAndTime = {\r\n                    eventTitle: title,\r\n                    eventDescription: description,\r\n                    eventStartTime: startTime,\r\n                    eventEndTime: endTime,\r\n                    eventStartDate: eventStartDate,\r\n                    eventEndDate: eventEndDate,\r\n                    userEmail : this.state.email\r\n                }\r\n\r\n                let config = {\r\n                    headers: {\r\n                        \"Content-Type\": \"application/json\",\r\n                        'Access-Control-Allow-Origin': '*',\r\n                    }\r\n                }\r\n                axios.post(this.state.serverDomain + '/event/calender/add', eventDayAndTime ,config)\r\n                    .then(response =>{\r\n                    })\r\n                    .catch(error =>{\r\n                        console.log(error)\r\n                    })\r\n            }\r\n            if (changed) {\r\n                data = data.map(appointment => (\r\n                    changed[appointment.id] ?\r\n                        { ...appointment, ...changed[appointment.id] } : appointment));\r\n\r\n                let testing = changed.undefined\r\n\r\n                if(testing.title !== undefined){\r\n                    let config = {\r\n                        headers: {\r\n                            \"Content-Type\": \"application/json\",\r\n                            'Access-Control-Allow-Origin': '*',\r\n                        }\r\n                    }\r\n                    let eventId = data[data.length-1].eventId\r\n                    const titleUpdate = {\r\n                        \"userEmail\" : this.state.email,\r\n                        \"eventId\" : eventId,\r\n                        \"newTitle\" : testing.title\r\n                    }\r\n\r\n                    axios.post(this.state.serverDomain + '/event/calender/edit/title', titleUpdate ,config)\r\n                        .then(response =>{\r\n\r\n                        })\r\n                        .catch(error =>{\r\n                            console.log(error)\r\n                        })\r\n                }\r\n\r\n                if(testing.startDate !== undefined){\r\n\r\n                    let config = {\r\n                        headers: {\r\n                            \"Content-Type\": \"application/json\",\r\n                            'Access-Control-Allow-Origin': '*',\r\n                        }\r\n                    }\r\n\r\n                    let startDateMonth = testing.startDate.toString().split(\" \")[1];\r\n                    let startDateYear = testing.startDate.toString().split(\" \")[3];\r\n                    let startDateDay = testing.startDate.toString().split(\" \")[2];\r\n                    let eventStartDate = startDateYear +'-' + startDateMonth + '-' + startDateDay;\r\n\r\n                    let eventId = data[data.length-1].eventId\r\n                    const startDateUpdate = {\r\n                        \"userEmail\" : this.state.email,\r\n                        \"eventId\" : eventId,\r\n                        \"newDate\" : eventStartDate\r\n                    }\r\n                    axios.post(this.state.serverDomain + '/event/calender/edit/date/start', startDateUpdate ,config)\r\n                    .then(response =>{\r\n                    })\r\n                    .catch(error =>{\r\n                        console.log(error)\r\n                    })\r\n                }\r\n\r\n                if(testing.endDate !== undefined){\r\n                    let config = {\r\n                        headers: {\r\n                            \"Content-Type\": \"application/json\",\r\n                            'Access-Control-Allow-Origin': '*',\r\n                        }\r\n                    }\r\n                    let endDateMonth = testing.endDate.toString().split(\" \")[1];\r\n                    let endDateYear = testing.endDate.toString().split(\" \")[3];\r\n                    let endDateDay = testing.endDate.toString().split(\" \")[2];\r\n                    let eventEndDate = endDateYear +'-' + endDateMonth + '-' + endDateDay;\r\n\r\n                    let eventId = data[data.length-1].eventId\r\n                    const endDateUpdate = {\r\n                        \"userEmail\" : this.state.email,\r\n                        \"eventId\" : eventId,\r\n                        \"newDate\" : eventEndDate\r\n                    }\r\n                    axios.post(this.state.serverDomain + '/event/calender/edit/date/end', endDateUpdate ,config)\r\n                        .then(response =>{\r\n                        })\r\n                        .catch(error =>{\r\n                            console.log(error)\r\n                        })\r\n                }\r\n\r\n                if(testing.startDate !== undefined){\r\n                    let startTime =testing.startDate.toString().split(\" \")[4];\r\n                    let config = {\r\n                        headers: {\r\n                            \"Content-Type\": \"application/json\",\r\n                            'Access-Control-Allow-Origin': '*',\r\n                        }\r\n                    }\r\n                    let eventId = data[data.length-1].eventId\r\n                    const startTimeUpdate = {\r\n                        \"userEmail\" : this.state.email,\r\n                        \"eventId\" : eventId,\r\n                        \"newTime\" : startTime\r\n                    }\r\n                    axios.post(this.state.serverDomain + '/event/calender/edit/time/start', startTimeUpdate ,config)\r\n                        .then(response =>{\r\n                        })\r\n                        .catch(error =>{\r\n                            console.log(error)\r\n                        })\r\n                }\r\n\r\n                if(testing.endDate !== undefined){\r\n                    let endTime =testing.endDate.toString().split(\" \")[4];\r\n                    let config = {\r\n                        headers: {\r\n                            \"Content-Type\": \"application/json\",\r\n                            'Access-Control-Allow-Origin': '*',\r\n                        }\r\n                    }\r\n                    let eventId = data[data.length-1].eventId\r\n                    const endTimeUpdate = {\r\n                        \"userEmail\" : this.state.email,\r\n                        \"eventId\" : eventId,\r\n                        \"newTime\" : endTime\r\n                    }\r\n                    console.log(endTimeUpdate)\r\n                    axios.post(this.state.serverDomain + '/event/calender/edit/time/end', endTimeUpdate ,config)\r\n                        .then(response =>{\r\n                        })\r\n                        .catch(error =>{\r\n                            console.log(error)\r\n                        })\r\n                }\r\n\r\n                if(testing.notes !== undefined){\r\n                    let config = {\r\n                        headers: {\r\n                            \"Content-Type\": \"application/json\",\r\n                            'Access-Control-Allow-Origin': '*',\r\n                        }\r\n                    }\r\n                    let eventId = data[data.length-1].eventId\r\n                    const descriptionUpdate = {\r\n                        \"userEmail\" : this.state.email,\r\n                        \"eventId\" : eventId,\r\n                        \"newDescription\" : testing.notes\r\n                    }\r\n                    console.log(descriptionUpdate)\r\n                    axios.post(this.state.serverDomain + '/event/calender/edit/description', descriptionUpdate ,config)\r\n                        .then(response =>{\r\n                        })\r\n                        .catch(error =>{\r\n                            console.log(error)\r\n                        })\r\n                }\r\n            }\r\n            if (deleted !== undefined) {\r\n                data = data.filter(appointment => appointment.id !== deleted);\r\n            }\r\n            return { data };\r\n        });\r\n    }\r\n    componentDidMount() {\r\n        this.getEvents();\r\n    }\r\n\r\n    getEvents(){\r\n        let config = {\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                'Access-Control-Allow-Origin': '*',\r\n            }\r\n        }\r\n\r\n        axios.get(this.state.serverDomain +'/event/get/calender/'+this.state.email,  config)\r\n            .then(response =>{\r\n                this.setState({data: response.data.object})\r\n            })\r\n            .catch(error =>{\r\n                console.log(error)\r\n            })\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            currentDate, data, addedAppointment, appointmentChanges, editingAppointment,\r\n        } = this.state;\r\n\r\n        return (\r\n            <div className=\"trythis\">\r\n                <div>\r\n                    <OrgSidebar />\r\n                </div>\r\n            <div className=\"calendar\">\r\n                    <Paper>\r\n                        <Scheduler\r\n                            data={data}\r\n                            height={660}\r\n                            remoteFiltering={true}\r\n                        >\r\n                            <ViewState\r\n                                currentDate={currentDate}\r\n                            />\r\n                            <EditingState\r\n                                onCommitChanges={this.commitChanges}\r\n                                addedAppointment={addedAppointment}\r\n                                onAddedAppointmentChange={this.changeAddedAppointment}\r\n                                appointmentChanges={appointmentChanges}\r\n                                onAppointmentChangesChange={this.changeAppointmentChanges}\r\n                                editingAppointment={editingAppointment}\r\n                                onEditingAppointmentChange={this.changeEditingAppointment}\r\n                            />\r\n                            <MonthView />\r\n                            <AllDayPanel />\r\n                            <EditRecurrenceMenu />\r\n                            <ConfirmationDialog />\r\n                            <Appointments />\r\n                            <AppointmentTooltip\r\n                                showOpenButton\r\n                                showDeleteButton\r\n                            />\r\n                            <AppointmentForm />\r\n                        </Scheduler>\r\n                    </Paper>\r\n            </div>\r\n            </div>\r\n\r\n        );\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}