{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Tshilidzi-PC\\\\Documents\\\\GitHub\\\\Givee\\\\Give-a-Lot\\\\frontend\\\\givealot\\\\src\\\\views\\\\dashboard\\\\sidebar\\\\Components\\\\Featured\\\\Cards.js\";\nimport React, { Component } from 'react';\nimport \"./Styles/Featured.css\";\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport PersonOutlineIcon from '@material-ui/icons/PersonOutline';\nimport PeopleOutlineIcon from '@material-ui/icons/PeopleOutline';\nimport ReportIcon from '@material-ui/icons/Report';\nimport NotificationsOutlinedIcon from '@material-ui/icons/NotificationsOutlined';\nimport axios from \"axios\";\nimport { ApiContext } from \"../../../../../apiContext/ApiContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport class Cards extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      Users: '',\n      Organisations: '',\n      notifications: '',\n      adminUserEmail: \"admin@email.com\",\n      orgId: 32,\n      reports: [],\n      adminId: 4,\n      serverDomain: 'http://localhost:8080'\n    };\n  }\n\n  componentDidMount() {\n    this.getUsers();\n    this.getOrganisations();\n    this.getNotifications();\n    this.getReports();\n  } /////////////////////////////////////Leave reports for only organisations\n\n\n  getReports() {\n    let config = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        'Access-Control-Allow-Origin': '*'\n      }\n    };\n    const adminUsersRequestBodyReports = {\n      // \"orgId\":\"id of an organisation\"\n      \"orgId\": this.state.orgId\n    }; // alert(this.state.serverDomain)\n\n    axios.post(this.state.serverDomain + '/report/get/all', adminUsersRequestBodyReports, config).then(response => {\n      console.log(response);\n      this.setState({\n        reports: response.data.object\n      });\n    }).catch(error => {\n      // console.log(error)\n      this.setState({\n        error: 'Error Retrieving data'\n      });\n    });\n  }\n\n  getUsers() {\n    if (localStorage.getItem('role') === 'admin') {\n      let config = {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          'Access-Control-Allow-Origin': '*'\n        }\n      };\n      const adminUsersRequestBody = {\n        \"adminUserEmail\": this.state.adminUserEmail\n      };\n      axios.post(this.state.serverDomain + '/v1/user/get/num_user', adminUsersRequestBody, config).then(response => {\n        console.log(response);\n        this.setState({\n          Users: response.data.response\n        }); // console.log(this.state.Users)\n      }).catch(error => {\n        // console.log(error)\n        this.setState({\n          error: 'Error Retrieving data'\n        });\n      });\n    }\n  }\n\n  getOrganisations() {\n    if (localStorage.getItem('role') === 'admin') {\n      let config = {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          'Access-Control-Allow-Origin': '*'\n        }\n      };\n      const adminUsersRequestBodyOrg = {\n        \"adminId\": this.state.adminId\n      };\n      axios.post(this.state.serverDomain + '/v1/organisation/get/organisations', adminUsersRequestBodyOrg, config).then(response => {\n        console.log(response);\n        this.setState({\n          Organisations: response.data.response\n        });\n      }).catch(error => {\n        alert(error);\n        this.setState({\n          error: 'Error Retrieving data'\n        });\n      });\n    } // else{\n    //     alert('current User not admin  ' + localStorage.getItem('role'))\n    // }\n\n  }\n\n  getNotifications() {\n    let config = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        'Access-Control-Allow-Origin': '*'\n      }\n    };\n    const adminUsersRequestBodyNotification = {\n      \"adminUserEmail\": this.state.adminUserEmail\n    };\n    axios.post('http://localhost:8080/v1/notifications/get/num_notifications', adminUsersRequestBodyNotification, config).then(response => {\n      // console.log(response)\n      this.setState({\n        notifications: response.data.response\n      }); // console.log(this.state.Reports)\n    }).catch(error => {\n      // console.log(error)\n      this.setState({\n        error: 'Error Retrieving data'\n      });\n    });\n  }\n\n  render() {\n    const {\n      Users,\n      Organisations,\n      notifications,\n      reports\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"flex\"\n      },\n      className: \"featuredCards\",\n      children: [/*#__PURE__*/_jsxDEV(Card, {\n        variant: \"outlined\",\n        className: \"cardElement\",\n        children: /*#__PURE__*/_jsxDEV(CardContent, {\n          style: {\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"space-evenly\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              color: \"textPrimary\",\n              children: \"Users\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              color: \"textSecondary\",\n              children: Users\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            color: \"textSecondary\",\n            className: \"cardIconUser\",\n            children: /*#__PURE__*/_jsxDEV(PersonOutlineIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 155,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        variant: \"outlined\",\n        className: \"cardElement\",\n        children: /*#__PURE__*/_jsxDEV(CardContent, {\n          style: {\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"space-evenly\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              color: \"textPrimary\",\n              children: \"Organisations\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              color: \"textSecondary\",\n              children: Organisations.length\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            color: \"textSecondary\",\n            className: \"cardIconOrg\",\n            children: /*#__PURE__*/_jsxDEV(PeopleOutlineIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        variant: \"outlined\",\n        className: \"cardElement\",\n        children: /*#__PURE__*/_jsxDEV(CardContent, {\n          style: {\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"space-evenly\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              color: \"textPrimary\",\n              children: \"Reports\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              color: \"textSecondary\",\n              children: reports.length\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            color: \"textSecondary\",\n            className: \"cardIconReports\",\n            children: /*#__PURE__*/_jsxDEV(ReportIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        variant: \"outlined\",\n        className: \"cardElement\",\n        children: /*#__PURE__*/_jsxDEV(CardContent, {\n          style: {\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"space-evenly\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              color: \"textPrimary\",\n              children: \"Notifications\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              color: \"textSecondary\",\n              children: notifications\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            color: \"textSecondary\",\n            className: \"cardIconNotifications\",\n            children: /*#__PURE__*/_jsxDEV(NotificationsOutlinedIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 203,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 13\n    }, this);\n  }\n\n}\nCards.contextType = ApiContext;\nexport default Cards;","map":{"version":3,"sources":["C:/Users/Tshilidzi-PC/Documents/GitHub/Givee/Give-a-Lot/frontend/givealot/src/views/dashboard/sidebar/Components/Featured/Cards.js"],"names":["React","Component","Card","CardContent","PersonOutlineIcon","PeopleOutlineIcon","ReportIcon","NotificationsOutlinedIcon","axios","ApiContext","Cards","constructor","props","state","Users","Organisations","notifications","adminUserEmail","orgId","reports","adminId","serverDomain","componentDidMount","getUsers","getOrganisations","getNotifications","getReports","config","headers","adminUsersRequestBodyReports","post","then","response","console","log","setState","data","object","catch","error","localStorage","getItem","adminUsersRequestBody","adminUsersRequestBodyOrg","alert","adminUsersRequestBodyNotification","render","display","alignItems","justifyContent","length","contextType"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport \"./Styles/Featured.css\"\r\nimport Card from '@material-ui/core/Card';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport PersonOutlineIcon from '@material-ui/icons/PersonOutline';\r\nimport PeopleOutlineIcon from '@material-ui/icons/PeopleOutline';\r\nimport ReportIcon from '@material-ui/icons/Report';\r\nimport NotificationsOutlinedIcon from '@material-ui/icons/NotificationsOutlined';\r\nimport axios from \"axios\";\r\nimport {ApiContext} from \"../../../../../apiContext/ApiContext\";\r\n\r\n\r\n\r\nexport class Cards extends Component {\r\n    static contextType = ApiContext;\r\n\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        this.state = {\r\n            Users: '',\r\n            Organisations: '',\r\n            notifications: '',\r\n            adminUserEmail:\"admin@email.com\",\r\n            orgId: 32,\r\n            reports: [],\r\n            adminId: 4,\r\n            serverDomain : 'http://localhost:8080',\r\n        }\r\n    }\r\n\r\n    componentDidMount(){\r\n        this.getUsers();\r\n        this.getOrganisations();\r\n        this.getNotifications();\r\n        this. getReports();\r\n    }\r\n\r\n/////////////////////////////////////Leave reports for only organisations\r\n    getReports(){\r\n        let config = {\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                'Access-Control-Allow-Origin': '*',\r\n            }\r\n        }\r\n        const adminUsersRequestBodyReports = {\r\n            // \"orgId\":\"id of an organisation\"\r\n            \"orgId\" : this.state.orgId\r\n        }\r\n        // alert(this.state.serverDomain)\r\n        axios.post(this.state.serverDomain+'/report/get/all', adminUsersRequestBodyReports, config)\r\n            .then(response =>{\r\n                console.log(response)\r\n                this.setState({ reports: response.data.object })\r\n\r\n            })\r\n            .catch(error =>{\r\n                // console.log(error)\r\n                this.setState({error : 'Error Retrieving data'})\r\n            })\r\n    }\r\n\r\n    getUsers(){\r\n        if(localStorage.getItem('role') === 'admin') {\r\n            let config = {\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                    'Access-Control-Allow-Origin': '*',\r\n                }\r\n            }\r\n            const adminUsersRequestBody = {\r\n                \"adminUserEmail\": this.state.adminUserEmail\r\n            }\r\n            axios.post(this.state.serverDomain + '/v1/user/get/num_user', adminUsersRequestBody, config)\r\n                .then(response => {\r\n                    console.log(response)\r\n                    this.setState({Users: response.data.response})\r\n                    // console.log(this.state.Users)\r\n\r\n                })\r\n                .catch(error => {\r\n                    // console.log(error)\r\n                    this.setState({error: 'Error Retrieving data'})\r\n                })\r\n        }\r\n    }\r\n\r\n    getOrganisations(){\r\n        if(localStorage.getItem('role') === 'admin'){\r\n            let config = {\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                    'Access-Control-Allow-Origin': '*',\r\n                }\r\n            }\r\n            const adminUsersRequestBodyOrg = {\r\n                \"adminId\" : this.state.adminId\r\n            }\r\n            axios.post(this.state.serverDomain+'/v1/organisation/get/organisations',adminUsersRequestBodyOrg , config)\r\n                .then(response =>{\r\n                    console.log(response)\r\n                    this.setState({ Organisations: response.data.response })\r\n\r\n                })\r\n                .catch(error =>{\r\n                    alert(error)\r\n                    this.setState({error : 'Error Retrieving data'})\r\n                })\r\n        }\r\n        // else{\r\n        //     alert('current User not admin  ' + localStorage.getItem('role'))\r\n        // }\r\n\r\n    }\r\n\r\n    getNotifications(){\r\n        let config = {\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                'Access-Control-Allow-Origin': '*',\r\n            }\r\n        }\r\n        const adminUsersRequestBodyNotification = {\r\n            \"adminUserEmail\" : this.state.adminUserEmail\r\n        }\r\n        axios.post('http://localhost:8080/v1/notifications/get/num_notifications',adminUsersRequestBodyNotification , config)\r\n            .then(response =>{\r\n                // console.log(response)\r\n                this.setState({ notifications: response.data.response })\r\n                // console.log(this.state.Reports)\r\n\r\n            })\r\n            .catch(error =>{\r\n                // console.log(error)\r\n                this.setState({error : 'Error Retrieving data'})\r\n            })\r\n    }\r\n\r\n    render() {\r\n        const { Users , Organisations, notifications, reports} = this.state\r\n        return (\r\n            <div style={{display: \"flex\"}} className= \"featuredCards\">\r\n                <Card variant=\"outlined\" className=\"cardElement\">\r\n                    <CardContent style={{display: \"flex\", alignItems: \"center\", justifyContent: \"space-evenly\"}}>\r\n                        <div>\r\n                            <div color=\"textPrimary\">\r\n                                Users\r\n                            </div>\r\n                            <div color=\"textSecondary\">\r\n                                {Users}\r\n                            </div>\r\n                        </div>\r\n                        <div color=\"textSecondary\" className=\"cardIconUser\" >\r\n                            <PersonOutlineIcon />\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n\r\n                <Card variant=\"outlined\" className=\"cardElement\">\r\n                    <CardContent style={{display: \"flex\", alignItems: \"center\", justifyContent: \"space-evenly\"}}>\r\n                        <div>\r\n                            <div color=\"textPrimary\">\r\n                                Organisations\r\n                            </div>\r\n                            <div color=\"textSecondary\">\r\n                                {Organisations.length}\r\n                            </div>\r\n                        </div>\r\n                        <div color=\"textSecondary\" className=\"cardIconOrg\" >\r\n                            <PeopleOutlineIcon />\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n\r\n                <Card variant=\"outlined\" className=\"cardElement\">\r\n                    <CardContent style={{display: \"flex\", alignItems: \"center\", justifyContent: \"space-evenly\"}}>\r\n                        <div>\r\n                            <div color=\"textPrimary\">\r\n                                Reports\r\n                            </div>\r\n                            <div color=\"textSecondary\">\r\n                                {reports.length}\r\n                            </div>\r\n                        </div>\r\n                        <div color=\"textSecondary\" className=\"cardIconReports\" >\r\n                            <ReportIcon />\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n\r\n                <Card variant=\"outlined\" className=\"cardElement\">\r\n                    <CardContent style={{display: \"flex\", alignItems: \"center\", justifyContent: \"space-evenly\"}}>\r\n                        <div>\r\n                            <div color=\"textPrimary\">\r\n                                Notifications\r\n                            </div>\r\n                            <div color=\"textSecondary\">\r\n                                {notifications}\r\n                            </div>\r\n                        </div>\r\n                        <div color=\"textSecondary\" className=\"cardIconNotifications\" >\r\n                            <NotificationsOutlinedIcon />\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n\r\n            </div>\r\n\r\n        )\r\n    }\r\n}\r\n\r\nexport default Cards\r\n"]},"metadata":{},"sourceType":"module"}