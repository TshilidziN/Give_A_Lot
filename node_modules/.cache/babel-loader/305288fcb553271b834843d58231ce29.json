{"ast":null,"code":"import _defineProperty from\"C:/Users/Tshilidzi-PC/Documents/GitHub/Givee/Give-a-Lot/frontend/givealot/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"C:/Users/Tshilidzi-PC/Documents/GitHub/Givee/Give-a-Lot/frontend/givealot/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/Tshilidzi-PC/Documents/GitHub/Givee/Give-a-Lot/frontend/givealot/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/Tshilidzi-PC/Documents/GitHub/Givee/Give-a-Lot/frontend/givealot/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/Tshilidzi-PC/Documents/GitHub/Givee/Give-a-Lot/frontend/givealot/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Link}from\"react-router-dom\";import ArrowBackIcon from'@material-ui/icons/ArrowBack';import backgroundImg from\"../../../assets/homeBackground.jpg\";import Logo from\"./Logo\";import axios from\"axios\";import\"../Styles/Login.css\";import{Alert}from\"@material-ui/lab\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var styles={main:{backgroundImage:\"url(\".concat(backgroundImg,\")\")}};var initialState={userEmail:\"\",emailError:\"\",password:\"\",passwordError:\"\"};var ResetPassword=/*#__PURE__*/function(_Component){_inherits(ResetPassword,_Component);var _super=_createSuper(ResetPassword);function ResetPassword(){var _this;_classCallCheck(this,ResetPassword);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state=initialState;_this.handleChange=function(event){var isCheckbox=event.target.type===\"checkbox\";_this.setState(_defineProperty({},event.target.name,isCheckbox?event.target.checked:event.target.value));};_this.validate=function(){var emailError=\"\";var passwordError=\"\";if(!_this.state.userEmail.includes(\"@\")){emailError=\"invalid email\";}if(!_this.state.password.length){passwordError=\"Password is required\";}if(emailError||passwordError){_this.setState({emailError:emailError,passwordError:passwordError});return false;}return true;};_this.handleSubmit=function(event){event.preventDefault();var isValid=_this.validate();if(isValid){console.log(_this.state);var data={password:_this.state.password,userEmail:_this.state.userEmail.toLowerCase()};document.getElementById(\"waitInfo\").style.display=\"flex\";document.getElementById(\"badLogin\").style.display=\"none\";axios.post(\"http://localhost:8080/v1/login/user/update_password\",data).then(function(res){console.log(res);if(res.data.success===true){_this.props.history.push(\"/ResetSuccess\");document.getElementById(\"waitInfo\").style.display=\"none\";}else{document.getElementById(\"badLogin\").style.display=\"flex\";document.getElementById(\"waitInfo\").style.display=\"none\";}}).catch(function(err){console.log(err);document.getElementById(\"badLogin\").style.display=\"flex\";document.getElementById(\"waitInfo\").style.display=\"none\";});}};return _this;}_createClass(ResetPassword,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"Login\",style:styles.main,children:/*#__PURE__*/_jsxs(\"div\",{id:\"banner_filter\",children:[/*#__PURE__*/_jsx(Logo,{}),/*#__PURE__*/_jsx(Link,{to:\"/Login\",children:/*#__PURE__*/_jsx(ArrowBackIcon,{style:{color:\"white\",marginLeft:\"30px\",fontSize:\"xx-large\"}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"LoginCard\",children:[/*#__PURE__*/_jsx(Alert,{severity:\"error\",id:\"badLogin\",children:\"password reset failed!\"}),/*#__PURE__*/_jsx(Alert,{severity:\"info\",id:\"waitInfo\",children:\"Updating password...\"}),/*#__PURE__*/_jsx(\"div\",{className:\"wrapper\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"LoginForm\",onSubmit:this.handleSubmit,children:[/*#__PURE__*/_jsx(\"span\",{className:\"LoginHeader\",children:\"Enter new password\"}),/*#__PURE__*/_jsx(\"span\",{className:\"Instruction\",children:\"Enter your email and a new password\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"LoginInput\",\"data-validate\":\"Username is required\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"LoginInputLabel\",children:\"Email\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{className:\"innerInput validate\",type:\"email\",name:\"userEmail\",placeholder:\"Enter your email\",onChange:this.handleChange})}),/*#__PURE__*/_jsx(\"span\",{className:\"loginError\",children:this.state.emailError})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"LoginInput\",\"data-validate\":\"Username is required\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"LoginInputLabel\",children:\"New Password\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{className:\"innerInput validate\",type:\"password\",name:\"password\",placeholder:\"Enter your password\",onChange:this.handleChange})}),/*#__PURE__*/_jsx(\"span\",{className:\"loginError\",children:this.state.passwordError})]}),/*#__PURE__*/_jsx(\"div\",{className:\"wrapper-btn\",children:/*#__PURE__*/_jsx(\"button\",{className:\"Login-btn\",id:\"loginBTN_less_rounded\",type:\"submit\",onClick:this.reset,children:\"Submit password\"})})]})})]})]})})});}}]);return ResetPassword;}(Component);export default ResetPassword;","map":{"version":3,"sources":["C:/Users/Tshilidzi-PC/Documents/GitHub/Givee/Give-a-Lot/frontend/givealot/src/views/login/Components/ResetPassword.js"],"names":["React","Component","Link","ArrowBackIcon","backgroundImg","Logo","axios","Alert","styles","main","backgroundImage","initialState","userEmail","emailError","password","passwordError","ResetPassword","state","handleChange","event","isCheckbox","target","type","setState","name","checked","value","validate","includes","length","handleSubmit","preventDefault","isValid","console","log","data","toLowerCase","document","getElementById","style","display","post","then","res","success","props","history","push","catch","err","color","marginLeft","fontSize","reset"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport { Link } from \"react-router-dom\";\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\r\nimport backgroundImg from \"../../../assets/homeBackground.jpg\";\r\nimport Logo from \"./Logo\"\r\nimport axios from \"axios\"\r\nimport \"../Styles/Login.css\"\r\nimport {Alert} from \"@material-ui/lab\";\r\n\r\nconst styles = {\r\n    main: {\r\n        backgroundImage: `url(${backgroundImg})`\r\n    }\r\n}\r\n\r\nconst initialState = {\r\n    userEmail: \"\",\r\n    emailError: \"\",\r\n    password: \"\",\r\n    passwordError: \"\",\r\n};\r\n\r\nclass ResetPassword extends Component {\r\n\r\n    state = initialState;\r\n\r\n    handleChange = event => {\r\n        const isCheckbox = event.target.type === \"checkbox\";\r\n        this.setState({\r\n            [event.target.name]: isCheckbox\r\n                ? event.target.checked\r\n                : event.target.value\r\n        });\r\n    };\r\n\r\n    validate = () => {\r\n        let emailError = \"\";\r\n        let passwordError = \"\";\r\n\r\n        if (!this.state.userEmail.includes(\"@\")) {\r\n            emailError = \"invalid email\";\r\n        }\r\n        if(!this.state.password.length ) {\r\n            passwordError=\"Password is required\";\r\n        }\r\n\r\n\r\n        if ( emailError || passwordError ) {\r\n            this.setState({ emailError ,  passwordError });\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    };\r\n\r\n\r\n    handleSubmit = event => {\r\n        event.preventDefault();\r\n        const isValid = this.validate();\r\n        if (isValid) {\r\n            console.log(this.state);\r\n\r\n            const data = {\r\n                password : this.state.password,\r\n                userEmail: this.state.userEmail.toLowerCase(),\r\n\r\n\r\n            };\r\n            document.getElementById(\"waitInfo\").style.display = \"flex\";\r\n            document.getElementById(\"badLogin\").style.display = \"none\";\r\n            axios.post(\"http://localhost:8080/v1/login/user/update_password\", data)\r\n                .then(res => {\r\n                    console.log(res)\r\n                    if (res.data.success === true) {\r\n\r\n                        this.props.history.push(\"/ResetSuccess\");\r\n                        document.getElementById(\"waitInfo\").style.display = \"none\";\r\n\r\n                    } else {\r\n                        document.getElementById(\"badLogin\").style.display = \"flex\";\r\n                        document.getElementById(\"waitInfo\").style.display = \"none\";\r\n                    }\r\n                })\r\n                .catch(err => {\r\n                    console.log(err)\r\n                    document.getElementById(\"badLogin\").style.display = \"flex\";\r\n                    document.getElementById(\"waitInfo\").style.display = \"none\";\r\n                });\r\n        }\r\n    };\r\n\r\n    render()\r\n    {\r\n        return (\r\n            <div>\r\n                <div className=\"Login\" style={styles.main}>\r\n                    <div  id={\"banner_filter\"}>\r\n                        <Logo/>\r\n                        <Link to={\"/Login\"}>\r\n                            <ArrowBackIcon style={{color: \"white\", marginLeft: \"30px\", fontSize: \"xx-large\"}}/>\r\n                        </Link>\r\n                        <div className=\"LoginCard\">\r\n                            <Alert severity=\"error\" id={\"badLogin\"}>password reset failed!</Alert>\r\n                            <Alert severity=\"info\" id={\"waitInfo\"}>Updating password...</Alert>\r\n                            <div className=\"wrapper\">\r\n                                <form className=\"LoginForm\" onSubmit={this.handleSubmit}>\r\n                       <span className=\"LoginHeader\">\r\n                           Enter new password\r\n                       </span>\r\n                                    <span className=\"Instruction\">\r\n                           Enter your email and a new password\r\n                       </span>\r\n                                    <div className=\"LoginInput\" data-validate=\"Username is required\">\r\n                                <span className=\"LoginInputLabel\">\r\n                                    Email\r\n                                </span>\r\n                                        <div>\r\n                                            <input\r\n                                                className=\"innerInput validate\"\r\n                                                type=\"email\"\r\n                                                name=\"userEmail\"\r\n                                                placeholder=\"Enter your email\"\r\n                                                onChange={this.handleChange}\r\n                                            />\r\n\r\n                                        </div>\r\n                                        <span className=\"loginError\">{this.state.emailError}</span>\r\n                                    </div>\r\n                                    <div className=\"LoginInput\" data-validate=\"Username is required\">\r\n                                <span className=\"LoginInputLabel\">\r\n                                    New Password\r\n                                </span>\r\n                                        <div>\r\n                                            <input\r\n                                                className=\"innerInput validate\"\r\n                                                type=\"password\"\r\n                                                name=\"password\"\r\n                                                placeholder=\"Enter your password\"\r\n                                                onChange={this.handleChange}\r\n                                            />\r\n\r\n                                        </div>\r\n                                        <span className=\"loginError\">{this.state.passwordError}</span>\r\n                                    </div>\r\n\r\n                                    <div className=\"wrapper-btn\">\r\n\r\n                                        <button className=\"Login-btn\" id={\"loginBTN_less_rounded\"} type=\"submit\" onClick={this.reset}>\r\n                                            Submit password\r\n                                        </button>\r\n                                    </div>\r\n                                </form>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default ResetPassword;\r\n"]},"metadata":{},"sourceType":"module"}