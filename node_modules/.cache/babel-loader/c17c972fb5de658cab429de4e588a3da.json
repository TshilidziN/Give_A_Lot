{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Tshilidzi-PC/Documents/GitHub/Givee/Give-a-Lot/frontend/givealot/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/Tshilidzi-PC/Documents/GitHub/Givee/Give-a-Lot/frontend/givealot/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/Tshilidzi-PC/Documents/GitHub/Givee/Give-a-Lot/frontend/givealot/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useContext}from'react';/* assets import */import filterBtn_mobile from\"../../assets/filter_list_black_24dp.svg\";import ui_message_art from'../../assets/feedback-2044700_1280.jpg';/* assets import end */ /* components import */import Organisation from'./Components/Organisation/Organisation';import OrganisationRecommended from'./Components/Organisation/OrganisationRecommended';import Sector from\"./Components/BrowseBySector/Sector\";import Navbar from\"./Components/Navbar/Navbar\";import Footer from\"./Components/Footer/Footer\";import Loader from\"../loader/Loader\";/* components import end */ /*css imports */import'./Styles/browse_general.css';import'./Styles/browse_desktop.css';import{ApiContext}from\"../../apiContext/ApiContext\";import Chatbot from\"../chatbot/Chatbot\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Browse(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),organisations=_useState2[0],setOrganisations=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),recommendedOrganisations=_useState4[0],setRecommendedOrganisations=_useState4[1];var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),pageLoaded=_React$useState2[0],setPageLoaded=_React$useState2[1];var _useState5=useState(useContext(ApiContext)),_useState6=_slicedToArray(_useState5,2),serverDomain=_useState6[0],setServerDomain=_useState6[1];var mobile_popUpControl_hide=function mobile_popUpControl_hide(event){event.preventDefault();var dark_backdrop_active_for_mobile=document.getElementById(\"dark_backdrop_active_for_mobile\");var browse_filters=document.getElementById(\"browse_filters\");dark_backdrop_active_for_mobile.style.display=\"none\";browse_filters.style.display=\"none\";};var mobile_popUpControl_display=function mobile_popUpControl_display(event){event.preventDefault();var dark_backdrop_active_for_mobile=document.getElementById(\"dark_backdrop_active_for_mobile\");var browse_filters=document.getElementById(\"browse_filters\");dark_backdrop_active_for_mobile.style.display=\"block\";browse_filters.style.display=\"block\";};/* fetch request - organisations by sections - start*/ /* \r\n        REMEMBER HOOKS: ELSE GOOD LUCK TRYING TO SOLVE THE \r\n                        INEVITABLE SHIT SHOW. \r\n\r\n        TODO: update login to use tokens on the request URL\r\n    */useEffect(function(){fetch(serverDomain+\"/v1/browse/sectors\").then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(response){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return response.json();case 2:data=_context.sent;if(!response.ok)/* error handling here */{if(response.status===500){window.location.assign(\"/browse\");}else if(response.status===401){}if(typeof data!=='undefined'){}}if(data.message===\"success\")/*successfully fetched*/{setOrganisations(data.object);setPageLoaded(true);}else{setOrganisations([]);}case 5:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}()).catch(function(error){});},[]);/* fetch request - organisations by sections - end*/var organisations_by_sector=[];if(organisations!==undefined){for(var i=0;i<organisations.length;i++){var sector=organisations[i].sector;var organisations_for_the_sector=[];for(var k=0;k<organisations[i].organisations.length;k++){var orgId=organisations[i].organisations[k].orgId;var orgName=organisations[i].organisations[k].orgName;var dateAdded=organisations[i].organisations[k].dateAdded;var imgUrl=serverDomain+\"/v1/organisation/image/get/logo/\"+orgId;var orgDescription=organisations[i].organisations[k].orgDescription;var certificate_level=organisations[i].organisations[k].certificate_level;organisations_for_the_sector.push(/*#__PURE__*/_jsx(Organisation,{orgId:orgId,orgName:orgName,dateAdded:dateAdded,imgUrl:imgUrl,certificate_level:certificate_level,orgDescription:orgDescription},orgId));}/*\r\n              Note for future reference: sector takes a list of organisations as prop\r\n            */organisations_by_sector.push(/*#__PURE__*/_jsx(Sector,{sector:sector,organisations_for_sec:organisations_for_the_sector},sector));}}/* fetch request - recommended - start*/ /*\r\n        REMEMBER HOOKS: ELSE GOOD LUCK TRYING TO SOLVE THE\r\n                        INEVITABLE SHIT SHOW.\r\n\r\n        TODO: update login to use tokens on the request URL\r\n    */var user_id=\"default\";/*TODO: pull this id from dom storage, if user is not logged in, use default*/useEffect(function(){fetch(serverDomain+\"/v1/browse/sectors/recommendations/\"+user_id).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(response){var data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return response.json();case 2:data=_context2.sent;if(!response.ok)/* error handling here */{if(response.status===500){}else if(response.status===401){}if(typeof data!=='undefined'){}}if(data.message===\"success\")/*successfully fetched*/{setRecommendedOrganisations(data.object);}else{setRecommendedOrganisations([]);}case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}()).catch(function(error){});},[]);/* fetch request - recommended - end*/var organisations_recommended=[];if(recommendedOrganisations!==undefined){for(var _k=0;_k<recommendedOrganisations.length;_k++){var _orgId=recommendedOrganisations[_k].orgId;var _orgName=recommendedOrganisations[_k].orgName;var _dateAdded=recommendedOrganisations[_k].dateAdded;var _imgUrl=serverDomain+\"/v1/organisation/image/get/logo/\"+_orgId;var _certificate_level=recommendedOrganisations[_k].certificate_level;var org_sector=recommendedOrganisations[_k].sector;var _orgDescription=recommendedOrganisations[_k].orgDescription;organisations_recommended.push(/*#__PURE__*/_jsx(OrganisationRecommended,{orgId:_orgId,orgName:_orgName,dateAdded:_dateAdded,imgUrl:_imgUrl,certificate_level:_certificate_level,org_sector:org_sector,orgDescription:_orgDescription},_orgId));}}return/*#__PURE__*/_jsxs(\"div\",{id:\"main_browse_page\",children:[pageLoaded===false&&/*#__PURE__*/_jsx(Loader,{}),/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(Chatbot,{}),/*#__PURE__*/_jsxs(\"div\",{id:\"browse_body\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"dark_backdrop_active_for_mobile\",onClick:mobile_popUpControl_hide}),/*#__PURE__*/_jsxs(\"div\",{id:\"filters_mobile\",onClick:mobile_popUpControl_display,children:[/*#__PURE__*/_jsx(\"p\",{children:\"filters\"}),/*#__PURE__*/_jsx(\"img\",{src:filterBtn_mobile,alt:\"filter-icon\"})]}),/*#__PURE__*/_jsx(\"section\",{id:\"browse_body_main\",children:/*#__PURE__*/_jsxs(\"div\",{id:\"browse_organisations\",children:[organisations_recommended.length>0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"browse_sector\",children:/*#__PURE__*/_jsx(\"p\",{className:\"browse_sector_name\",children:\"recommended for you\"})}),/*#__PURE__*/_jsx(\"div\",{id:\"reco_organisations\",children:organisations_recommended})]}),organisations_by_sector.length>0&&/*#__PURE__*/_jsxs(\"div\",{id:\"ui_element_message\",children:[/*#__PURE__*/_jsx(\"img\",{src:ui_message_art,alt:\"\"}),/*#__PURE__*/_jsxs(\"div\",{id:\"ui_element_message_text\",children:[/*#__PURE__*/_jsx(\"p\",{id:\"ui_element_message_head\",children:\"Find a cause that you care about\"}),/*#__PURE__*/_jsxs(\"p\",{id:\"ui_element_message_subtext\",children:[\"The following organisations have been individually reviewed by Give A Lot\",/*#__PURE__*/_jsx(\"img\",{})]})]})]}),/*#__PURE__*/_jsx(\"div\",{id:\"default_organisations\",children:organisations_by_sector}),organisations_by_sector.length>0&&/*#__PURE__*/_jsxs(\"div\",{id:\"ui_element_message\",children:[/*#__PURE__*/_jsx(\"img\",{src:ui_message_art,alt:\"\"}),/*#__PURE__*/_jsxs(\"div\",{id:\"ui_element_message_text\",children:[/*#__PURE__*/_jsx(\"p\",{id:\"ui_element_message_head\",children:\"Find a cause that you care about\"}),/*#__PURE__*/_jsxs(\"p\",{id:\"ui_element_message_subtext\",children:[\"The following organisations have been individually reviewed by Give A Lot\",/*#__PURE__*/_jsx(\"img\",{})]})]})]})]})}),/*#__PURE__*/_jsx(Footer,{})]})]});}export default Browse;","map":{"version":3,"sources":["C:/Users/Tshilidzi-PC/Documents/GitHub/Givee/Give-a-Lot/frontend/givealot/src/views/browse/Browse.js"],"names":["React","useState","useEffect","useContext","ui_message_art","Organisation","OrganisationRecommended","Sector","Navbar","Footer","Loader","ApiContext","Chatbot","Browse","organisations","setOrganisations","recommendedOrganisations","setRecommendedOrganisations","pageLoaded","setPageLoaded","serverDomain","setServerDomain","mobile_popUpControl_hide","event","preventDefault","dark_backdrop_active_for_mobile","document","getElementById","browse_filters","style","display","mobile_popUpControl_display","fetch","then","response","json","data","ok","status","window","location","assign","message","object","catch","error","organisations_by_sector","undefined","i","length","sector","organisations_for_the_sector","k","orgId","orgName","dateAdded","imgUrl","orgDescription","certificate_level","push","user_id","organisations_recommended","org_sector","filterBtn_mobile"],"mappings":"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","sourcesContent":["import React, {useState, useEffect, useContext} from 'react';\r\n\r\n/* assets import */\r\nimport filterBtn_mobile from '../../assets/filter_list_black_24dp.svg';\r\nimport ui_message_art from '../../assets/feedback-2044700_1280.jpg';\r\n/* assets import end */\r\n\r\n/* components import */\r\nimport Organisation from './Components/Organisation/Organisation';\r\nimport OrganisationRecommended from './Components/Organisation/OrganisationRecommended';\r\nimport Sector from \"./Components/BrowseBySector/Sector\";\r\nimport Navbar from \"./Components/Navbar/Navbar\";\r\nimport Footer from \"./Components/Footer/Footer\";\r\nimport Loader from \"../loader/Loader\";\r\n/* components import end */\r\n\r\n/*css imports */\r\nimport  './Styles/browse_general.css';\r\nimport  './Styles/browse_desktop.css';\r\nimport {ApiContext} from \"../../apiContext/ApiContext\";\r\nimport Chatbot from \"../chatbot/Chatbot\";\r\n\r\n\r\nfunction Browse ()\r\n{\r\n    const [organisations, setOrganisations] = useState([]);\r\n    const [recommendedOrganisations, setRecommendedOrganisations] = useState([]);\r\n    const [pageLoaded, setPageLoaded] = React.useState(false);\r\n    const [serverDomain, setServerDomain] = useState(useContext(ApiContext))\r\n\r\n    const mobile_popUpControl_hide = event =>\r\n    {\r\n        event.preventDefault();\r\n        var dark_backdrop_active_for_mobile = document.getElementById(\"dark_backdrop_active_for_mobile\");\r\n        var browse_filters = document.getElementById(\"browse_filters\");\r\n\r\n        dark_backdrop_active_for_mobile.style.display = \"none\";\r\n        browse_filters.style.display = \"none\";\r\n    }\r\n\r\n    const mobile_popUpControl_display = event =>\r\n    {\r\n        event.preventDefault();\r\n        var dark_backdrop_active_for_mobile = document.getElementById(\"dark_backdrop_active_for_mobile\");\r\n        var browse_filters = document.getElementById(\"browse_filters\");\r\n\r\n        dark_backdrop_active_for_mobile.style.display = \"block\";\r\n        browse_filters.style.display = \"block\";\r\n    }\r\n\r\n    /* fetch request - organisations by sections - start*/\r\n\r\n    /* \r\n        REMEMBER HOOKS: ELSE GOOD LUCK TRYING TO SOLVE THE \r\n                        INEVITABLE SHIT SHOW. \r\n\r\n        TODO: update login to use tokens on the request URL\r\n    */\r\n    useEffect(() => {\r\n        fetch( serverDomain + \"/v1/browse/sectors\")\r\n        .then(async response =>{\r\n\r\n            const data = await response.json();\r\n\r\n            if(!response.ok) /* error handling here */\r\n            {            \r\n                if(response.status === 500)\r\n                {\r\n                    window.location.assign(\"/browse\");\r\n                }\r\n                else if(response.status === 401)\r\n                {\r\n\r\n                }\r\n\r\n                if(typeof data !== 'undefined')\r\n                {\r\n\r\n                }\r\n            }\r\n\r\n            if(data.message === \"success\") /*successfully fetched*/\r\n            {\r\n                setOrganisations(data.object);\r\n                setPageLoaded(true);\r\n            }\r\n            else\r\n            {\r\n\r\n                setOrganisations([]);\r\n            }\r\n        })\r\n        \r\n        .catch(error => {\r\n\r\n        });\r\n    }\r\n    ,[])\r\n    /* fetch request - organisations by sections - end*/\r\n\r\n    let organisations_by_sector = [];\r\n    if(organisations !== undefined)\r\n    {\r\n        for (let i = 0; i < organisations.length; i++)\r\n        {\r\n            let sector = organisations[i].sector;\r\n            let organisations_for_the_sector = [];\r\n\r\n            for (let k = 0; k < organisations[i].organisations.length; k++)\r\n            {\r\n                let orgId = organisations[i].organisations[k].orgId;\r\n                let orgName = organisations[i].organisations[k].orgName;\r\n                let dateAdded = organisations[i].organisations[k].dateAdded;\r\n                let imgUrl = serverDomain + \"/v1/organisation/image/get/logo/\" + orgId;\r\n                let orgDescription = organisations[i].organisations[k].orgDescription;\r\n                let certificate_level = organisations[i].organisations[k].certificate_level;\r\n\r\n                organisations_for_the_sector.push(<Organisation orgId = {orgId}\r\n                                                                orgName= {orgName}\r\n                                                                dateAdded = {dateAdded}\r\n                                                                imgUrl = {imgUrl}\r\n                                                                certificate_level = {certificate_level}\r\n                                                                orgDescription = {orgDescription}\r\n                                                                key={orgId}/>);\r\n            }\r\n            /*\r\n              Note for future reference: sector takes a list of organisations as prop\r\n            */\r\n\r\n            organisations_by_sector.push(<Sector sector={sector}\r\n                                                 organisations_for_sec={organisations_for_the_sector}\r\n                                                 key={sector}/>);\r\n        }\r\n    }\r\n\r\n    /* fetch request - recommended - start*/\r\n    /*\r\n        REMEMBER HOOKS: ELSE GOOD LUCK TRYING TO SOLVE THE\r\n                        INEVITABLE SHIT SHOW.\r\n\r\n        TODO: update login to use tokens on the request URL\r\n    */\r\n    let user_id = \"default\"; /*TODO: pull this id from dom storage, if user is not logged in, use default*/\r\n\r\n    useEffect(() => {\r\n            fetch(serverDomain + \"/v1/browse/sectors/recommendations/\"+user_id)\r\n                .then(async response =>{\r\n\r\n                    const data = await response.json();\r\n\r\n                    if(!response.ok) /* error handling here */\r\n                    {\r\n                        if(response.status === 500)\r\n                        {\r\n\r\n                        }\r\n                        else if(response.status === 401)\r\n                        {\r\n\r\n                        }\r\n\r\n                        if(typeof data !== 'undefined')\r\n                        {\r\n                        }\r\n                    }\r\n\r\n\r\n                    if(data.message === \"success\") /*successfully fetched*/\r\n                    {\r\n                        setRecommendedOrganisations(data.object);\r\n                    }\r\n                    else\r\n                    {\r\n                        setRecommendedOrganisations([]);\r\n                    }\r\n                })\r\n\r\n                .catch(error => {\r\n\r\n                });\r\n        }\r\n        ,[])\r\n    /* fetch request - recommended - end*/\r\n\r\n    let organisations_recommended = [];\r\n    if(recommendedOrganisations !== undefined)\r\n    {\r\n\r\n        for (let k = 0; k < recommendedOrganisations.length; k++)\r\n        {\r\n            let orgId = recommendedOrganisations[k].orgId;\r\n            let orgName = recommendedOrganisations[k].orgName;\r\n            let dateAdded = recommendedOrganisations[k].dateAdded;\r\n            let imgUrl = serverDomain + \"/v1/organisation/image/get/logo/\" + orgId;\r\n            let certificate_level = recommendedOrganisations[k].certificate_level;\r\n            let org_sector = recommendedOrganisations[k].sector;\r\n            let orgDescription = recommendedOrganisations[k].orgDescription;\r\n\r\n            organisations_recommended.push(<OrganisationRecommended orgId = {orgId}\r\n                                                                    orgName= {orgName}\r\n                                                                    dateAdded = {dateAdded}\r\n                                                                    imgUrl = {imgUrl}\r\n                                                                    certificate_level = {certificate_level}\r\n                                                                    org_sector = {org_sector}\r\n                                                                    orgDescription = {orgDescription}\r\n                                                                    key={orgId}/>);\r\n        }\r\n    }\r\n    return (\r\n        <div id={\"main_browse_page\"}>\r\n\r\n            {pageLoaded === false && <Loader />}\r\n            <Navbar/>\r\n            <Chatbot />\r\n            <div id=\"browse_body\">\r\n\r\n                <div id=\"dark_backdrop_active_for_mobile\" onClick={mobile_popUpControl_hide}>\r\n                    {/*this is used on the mobile version of the application,\r\n                       helps minimise the the filters */}\r\n                </div>\r\n\r\n                <div id=\"filters_mobile\" onClick={mobile_popUpControl_display}>\r\n                    <p >filters</p><img  src={filterBtn_mobile} alt={\"filter-icon\"} />\r\n                </div>\r\n                \r\n                <section id=\"browse_body_main\">\r\n                    <div id=\"browse_organisations\">\r\n\r\n\r\n                        {organisations_recommended.length > 0 &&\r\n                            <>\r\n                                <div className=\"browse_sector\">\r\n                                    <p className=\"browse_sector_name\">recommended for you</p>\r\n                                </div>\r\n                                <div id=\"reco_organisations\">\r\n                                    {organisations_recommended}\r\n                                </div>\r\n                            </>\r\n                        }\r\n\r\n                        {organisations_by_sector.length > 0 &&\r\n                            <div id=\"ui_element_message\">\r\n                            <img src={ui_message_art} alt={\"\"}/>\r\n                            <div id=\"ui_element_message_text\">\r\n                                <p id=\"ui_element_message_head\">Find a cause that you care about</p>\r\n                                <p id=\"ui_element_message_subtext\">The following organisations have been individually\r\n                                    reviewed by Give A Lot<img/></p>\r\n                            </div>\r\n                        </div>}\r\n\r\n                        <div id=\"default_organisations\">\r\n                            {organisations_by_sector}\r\n                        </div>\r\n\r\n                        {/* this block was not a part of the initial design */}\r\n\r\n                        {organisations_by_sector.length > 0 &&\r\n                        <div id=\"ui_element_message\">\r\n                            <img src={ui_message_art} alt={\"\"}/>\r\n                            <div id=\"ui_element_message_text\">\r\n                                    <p id=\"ui_element_message_head\">Find a cause that you care about</p>\r\n                                    <p id=\"ui_element_message_subtext\">The following organisations have been individually\r\n                                    reviewed by Give A Lot<img/></p>\r\n                            </div>\r\n                            </div>\r\n                        }\r\n                        {/* this block was not a part of the initial design - end */}\r\n                    </div>\r\n                </section>\r\n\r\n                <Footer/>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Browse;"]},"metadata":{},"sourceType":"module"}