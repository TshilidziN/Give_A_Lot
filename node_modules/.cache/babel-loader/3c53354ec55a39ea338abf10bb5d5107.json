{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Tshilidzi-PC\\\\Documents\\\\GitHub\\\\Givee\\\\Give-a-Lot\\\\frontend\\\\givealot\\\\src\\\\views\\\\login\\\\Login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useContext } from 'react';\nimport { Link, useHistory, Redirect } from \"react-router-dom\";\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport backgroundImg from \"../../assets/homeBackground.jpg\";\nimport Logo from \"./Components/Logo\";\nimport axios from \"axios\";\nimport \"./Styles/Login.css\";\nimport { Alert } from \"@material-ui/lab\";\nimport { ApiContext } from \"../../apiContext/ApiContext\";\nimport { FrontEndContext } from \"../../apiContext/FrontEndContext\";\nimport { TextField } from \"@material-ui/core\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst styles = {\n  main: {\n    backgroundImage: `url(${backgroundImg})`\n  }\n};\n\nfunction Login() {\n  _s();\n\n  let history = useHistory();\n  const [email_error_message, set_email_error_message] = useState(\"\");\n  const [password_error_message, set_password_error_message] = useState(\"\");\n  const [serverDomain, setServerDomain] = useState(useContext(ApiContext));\n  const [frontEndDomain, setFrontEndDomain] = useState(useContext(FrontEndContext));\n\n  const validate_email_address = event => {\n    event.preventDefault();\n  };\n\n  const determine_current_user_login = event => {\n    event.preventDefault();\n    localStorage.clear();\n    let login_user_email = document.getElementById(\"login_user_email\").value.toString();\n    let login_user_password = document.getElementById(\"login_user_password\").value.toString();\n\n    if (!login_user_email.includes(\"@\") || login_user_email.length === 0) {\n      set_email_error_message(\"email is required\");\n    }\n\n    if (login_user_password.length === 0) {\n      set_password_error_message(\"password is required\");\n    } else {\n      const data = {\n        \"username\": login_user_email,\n        \"password\": login_user_password,\n        \"role\": \"\"\n      };\n      document.getElementById(\"waitInfo\").style.display = \"flex\";\n      document.getElementById(\"badLogin\").style.display = \"none\";\n      document.getElementById(\"serverError\").style.display = \"none\";\n      axios.post(serverDomain + '/v1/login/user/determine', data).then(response => {\n        localStorage.setItem(\"id\", response.data.id);\n        localStorage.setItem(\"role\", response.data.jwttoken);\n        localStorage.setItem(\"curr_user_email\", response.data.curr_user_email);\n\n        if (response.data.jwttoken === \"general\") {\n          document.getElementById(\"waitInfo\").style.display = \"none\";\n          window.location.href = frontEndDomain + \"/\";\n        } else if (response.data.jwttoken === \"admin\") {\n          document.getElementById(\"waitInfo\").style.display = \"none\";\n          window.location.href = frontEndDomain + \"/featured/\";\n        } else if (response.data.jwttoken === \"organisation\") {\n          document.getElementById(\"waitInfo\").style.display = \"none\";\n          window.location.href = frontEndDomain + \"/profile/\";\n        }\n      }).catch(error => {\n        if (error.response) {\n          console.log(error.response);\n\n          if (error.response.data.message.includes(\"organisation not found\") || error.response.data.message.includes(\"user password is incorrect\")) {\n            document.getElementById(\"badLogin\").style.display = \"flex\";\n            document.getElementById(\"waitInfo\").style.display = \"none\";\n          } else {\n            document.getElementById(\"serverError\").style.display = \"flex\";\n            document.getElementById(\"waitInfo\").style.display = \"none\";\n          }\n        } else {\n          document.getElementById(\"serverError\").style.display = \"flex\";\n          document.getElementById(\"waitInfo\").style.display = \"none\";\n        }\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Login\",\n      style: styles.main,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"banner_filter\",\n        children: [/*#__PURE__*/_jsxDEV(Logo, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/\",\n          children: /*#__PURE__*/_jsxDEV(ArrowBackIcon, {\n            style: {\n              color: \"white\",\n              marginLeft: \"30px\",\n              fontSize: \"xx-large\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"LoginCard\",\n          children: [/*#__PURE__*/_jsxDEV(Alert, {\n            severity: \"error\",\n            id: \"badLogin\",\n            children: \"incorrect username or password!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Alert, {\n            severity: \"error\",\n            id: \"serverError\",\n            children: \"server error...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Alert, {\n            severity: \"info\",\n            id: \"waitInfo\",\n            children: \"signing in...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"wrapper\",\n            children: /*#__PURE__*/_jsxDEV(\"form\", {\n              className: \"LoginForm\",\n              onSubmit: determine_current_user_login,\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"LoginHeader\",\n                children: \"Sign in\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 128,\n                columnNumber: 32\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"LoginInput\",\n                \"data-validate\": \"Username is required\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"LoginInputLabel\",\n                  children: \"Email\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 133,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(TextField, {\n                  id: \"login_user_email\",\n                  className: \"innerInput validate\",\n                  type: \"email\",\n                  name: \"email\",\n                  variant: \"outlined\",\n                  placeholder: \"Enter your email\",\n                  onChange: validate_email_address\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 137,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"loginError\",\n                  children: email_error_message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 147,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 132,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"LoginInput\",\n                \"data-validate\": \"Username is required\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"LoginInputLabel\",\n                  children: \"Password\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 150,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(TextField, {\n                  id: \"login_user_password\",\n                  className: \"innerInput validate\",\n                  type: \"password\",\n                  name: \"password\",\n                  variant: \"outlined\",\n                  placeholder: \"Enter your password\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 154,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"loginError\",\n                  children: password_error_message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 163,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 149,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"wrapper-btn\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"Login-btn\",\n                  id: \"loginBTN_less_rounded\",\n                  type: \"submit\",\n                  children: \"Login\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 167,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 166,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"BottomForm\",\n                children: [/*#__PURE__*/_jsxDEV(Link, {\n                  to: \"/signUp\",\n                  className: \"BottomLinker\",\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \" Need an account?\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 174,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 173,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(Link, {\n                  to: \"/Password\",\n                  className: \"BottomLinker\",\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \" Forgot password?\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 178,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 177,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 172,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 115,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Login, \"+nc2FVGtDJcaW4k5IknIle1PnJ4=\", false, function () {\n  return [useHistory];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["C:/Users/Tshilidzi-PC/Documents/GitHub/Givee/Give-a-Lot/frontend/givealot/src/views/login/Login.js"],"names":["React","useState","useContext","Link","useHistory","Redirect","ArrowBackIcon","backgroundImg","Logo","axios","Alert","ApiContext","FrontEndContext","TextField","styles","main","backgroundImage","Login","history","email_error_message","set_email_error_message","password_error_message","set_password_error_message","serverDomain","setServerDomain","frontEndDomain","setFrontEndDomain","validate_email_address","event","preventDefault","determine_current_user_login","localStorage","clear","login_user_email","document","getElementById","value","toString","login_user_password","includes","length","data","style","display","post","then","response","setItem","id","jwttoken","curr_user_email","window","location","href","catch","error","console","log","message","color","marginLeft","fontSize"],"mappings":"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","sourcesContent":["import React, {useState,useContext} from 'react';\r\nimport {Link, useHistory,Redirect} from \"react-router-dom\";\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\r\nimport backgroundImg from \"../../assets/homeBackground.jpg\";\r\nimport Logo from \"./Components/Logo\";\r\nimport axios from \"axios\"\r\nimport \"./Styles/Login.css\";\r\nimport {Alert} from \"@material-ui/lab\";\r\n\r\nimport {ApiContext} from \"../../apiContext/ApiContext\";\r\nimport {FrontEndContext} from \"../../apiContext/FrontEndContext\";\r\nimport {TextField} from \"@material-ui/core\";\r\n\r\nconst styles = {\r\n    main: {\r\n        backgroundImage: `url(${backgroundImg})`\r\n\r\n    }\r\n}\r\n\r\nfunction Login ()\r\n{\r\n    let history = useHistory();\r\n    const [email_error_message,set_email_error_message] = useState(\"\");\r\n    const [password_error_message,set_password_error_message] = useState(\"\");\r\n    const [serverDomain, setServerDomain] = useState(useContext(ApiContext));\r\n    const [frontEndDomain, setFrontEndDomain] = useState(useContext(FrontEndContext));\r\n\r\n\r\n    const validate_email_address = event =>\r\n    {\r\n        event.preventDefault();\r\n    }\r\n\r\n    const determine_current_user_login = event =>\r\n    {\r\n        event.preventDefault();\r\n        localStorage.clear();\r\n        let login_user_email = document.getElementById(\"login_user_email\").value.toString();\r\n        let login_user_password = document.getElementById(\"login_user_password\").value.toString();\r\n\r\n        if(!login_user_email.includes(\"@\") || login_user_email.length === 0)\r\n        {\r\n            set_email_error_message(\"email is required\")\r\n        }\r\n\r\n        if(login_user_password.length === 0)\r\n        {\r\n            set_password_error_message(\"password is required\")\r\n        }\r\n        else\r\n        {\r\n            const data = {\r\n                \"username\" : login_user_email,\r\n                \"password\" : login_user_password,\r\n                \"role\" : \"\"\r\n            }\r\n\r\n            document.getElementById(\"waitInfo\").style.display = \"flex\";\r\n            document.getElementById(\"badLogin\").style.display = \"none\";\r\n            document.getElementById(\"serverError\").style.display = \"none\";\r\n\r\n            axios.post(serverDomain + '/v1/login/user/determine', data)\r\n            .then(response =>\r\n            {\r\n                localStorage.setItem( \"id\" ,response.data.id);\r\n                localStorage.setItem( \"role\" ,response.data.jwttoken)\r\n                localStorage.setItem( \"curr_user_email\" ,response.data.curr_user_email)\r\n\r\n                if(response.data.jwttoken === \"general\")\r\n                {\r\n\r\n                    document.getElementById(\"waitInfo\").style.display = \"none\";\r\n                    window.location.href = frontEndDomain + \"/\";\r\n                }\r\n                else if(response.data.jwttoken === \"admin\")\r\n                {\r\n                    document.getElementById(\"waitInfo\").style.display = \"none\";\r\n                    window.location.href = frontEndDomain + \"/featured/\";\r\n                }\r\n                else if(response.data.jwttoken === \"organisation\")\r\n                {\r\n                    document.getElementById(\"waitInfo\").style.display = \"none\";\r\n                    window.location.href = frontEndDomain + \"/profile/\";\r\n                }\r\n            })\r\n            .catch(error =>{\r\n                if(error.response)\r\n                {\r\n                    console.log(error.response)\r\n                    if(error.response.data.message.includes(\"organisation not found\") || error.response.data.message.includes(\"user password is incorrect\"))\r\n                    {\r\n                        document.getElementById(\"badLogin\").style.display = \"flex\";\r\n                        document.getElementById(\"waitInfo\").style.display = \"none\";\r\n                    }\r\n                    else\r\n                    {\r\n                        document.getElementById(\"serverError\").style.display = \"flex\";\r\n                        document.getElementById(\"waitInfo\").style.display = \"none\";\r\n\r\n                    }\r\n                }\r\n                else\r\n                {\r\n                    document.getElementById(\"serverError\").style.display = \"flex\";\r\n                    document.getElementById(\"waitInfo\").style.display = \"none\";\r\n\r\n                }\r\n            })\r\n        }\r\n    };\r\n\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"Login\" style={styles.main}>\r\n                <div  id={\"banner_filter\"}>\r\n                    <Logo/>\r\n                    <Link to={\"/\"}>\r\n                        <ArrowBackIcon style={{color: \"white\", marginLeft: \"30px\", fontSize: \"xx-large\"}}/>\r\n                    </Link>\r\n                    <div className=\"LoginCard\">\r\n                        <Alert severity=\"error\" id={\"badLogin\"}>incorrect username or password!</Alert>\r\n                        <Alert severity=\"error\" id={\"serverError\"}>server error...</Alert>\r\n                        <Alert severity=\"info\" id={\"waitInfo\"}>signing in...</Alert>\r\n                        <div className=\"wrapper\">\r\n                            <form className=\"LoginForm\" onSubmit={determine_current_user_login}>\r\n                               <span className=\"LoginHeader\">\r\n                                   Sign in\r\n                               </span>\r\n\r\n                                <div className=\"LoginInput\" data-validate=\"Username is required\">\r\n                                    <span className=\"LoginInputLabel\">\r\n                                        Email\r\n                                    </span>\r\n\r\n                                    <TextField\r\n                                        id=\"login_user_email\"\r\n                                        className=\"innerInput validate\"\r\n                                        type=\"email\"\r\n                                        name=\"email\"\r\n                                        variant={\"outlined\"}\r\n                                        placeholder=\"Enter your email\"\r\n                                        onChange={validate_email_address}\r\n                                    />\r\n\r\n                                    <span className=\"loginError\">{email_error_message}</span>\r\n                                </div>\r\n                                <div className=\"LoginInput\" data-validate=\"Username is required\">\r\n                                    <span className=\"LoginInputLabel\">\r\n                                        Password\r\n                                    </span>\r\n\r\n                                    <TextField\r\n                                        id={\"login_user_password\"}\r\n                                        className=\"innerInput validate\"\r\n                                        type=\"password\"\r\n                                        name=\"password\"\r\n                                        variant={\"outlined\"}\r\n                                        placeholder=\"Enter your password\"\r\n                                    />\r\n\r\n                                    <span className=\"loginError\">{password_error_message}</span>\r\n                                </div>\r\n\r\n                                <div className=\"wrapper-btn\">\r\n                                    <button className=\"Login-btn\" id={\"loginBTN_less_rounded\"} type=\"submit\">\r\n                                        Login\r\n                                    </button>\r\n                                </div>\r\n\r\n                                <div className=\"BottomForm\">\r\n                                    <Link to={\"/signUp\"} className=\"BottomLinker\">\r\n                                        <span> Need an account?</span>\r\n                                    </Link>\r\n\r\n                                    <Link to={\"/Password\"} className=\"BottomLinker\">\r\n                                        <span> Forgot password?</span>\r\n                                    </Link>\r\n                                </div>\r\n                            </form>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}