{"ast":null,"code":"import _defineProperty from\"C:/Users/Tshilidzi-PC/Documents/GitHub/Givee/Give-a-Lot/frontend/givealot/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"C:/Users/Tshilidzi-PC/Documents/GitHub/Givee/Give-a-Lot/frontend/givealot/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/Tshilidzi-PC/Documents/GitHub/Givee/Give-a-Lot/frontend/givealot/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/Tshilidzi-PC/Documents/GitHub/Givee/Give-a-Lot/frontend/givealot/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/Tshilidzi-PC/Documents/GitHub/Givee/Give-a-Lot/frontend/givealot/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Link}from\"react-router-dom\";import SearchIcon from\"@material-ui/icons/Search\";import AddCircleOutlinedIcon from\"@material-ui/icons/AddCircleOutlined\";import Avatar from'@material-ui/core/Avatar';import Button from'@material-ui/core/Button';import\"../../styles/Organisations.css\";import Grid from'@material-ui/core/Grid';import axios from'axios';import EditIcon from'@material-ui/icons/Edit';import Dialog from\"@material-ui/core/Dialog\";import DialogContent from\"@material-ui/core/DialogContent\";import DialogTitle from\"@material-ui/core/DialogTitle\";import TextField from\"@material-ui/core/TextField\";import AddOrg from\"./AddOrg\";import Divider from'@material-ui/core/Divider';import TableContainer from\"@material-ui/core/TableContainer\";import Paper from\"@material-ui/core/Paper\";import Table from\"@material-ui/core/Table\";import TableHead from\"@material-ui/core/TableHead\";import TableBody from\"@material-ui/core/TableBody\";import TableRow from\"@material-ui/core/TableRow\";import TableCell from\"@material-ui/core/TableCell\";import AdminSidebar from\"../DemoSidebar/AdminSidebar\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var OrganisationsDash=/*#__PURE__*/function(_Component){_inherits(OrganisationsDash,_Component);var _super=_createSuper(OrganisationsDash);function OrganisationsDash(props){var _this;_classCallCheck(this,OrganisationsDash);_this=_super.call(this,props);_this.handleClose=function(){_this.setState({open:false});};_this.handleCloseAdd=function(){_this.setState({openAdd:false});};_this.handleCloseSector=function(){_this.setState({openSector:false});};_this.changeHandler=function(e){_this.setState(_defineProperty({},e.target.name,e.target.value));};_this.submitSector=function(e){e.preventDefault();var config={headers:{\"Content-Type\":\"application/json\",'Access-Control-Allow-Origin':'*'}};var AddSector={\"sector\":_this.state.sector,\"adminId\":_this.state.adminId};axios.post(_this.state.serverDomain+'/v1/organisation/add/sector',AddSector,config).then(function(response){_this.setState({openSector:true});}).catch(function(error){console.log(error);});};_this.state={org:[],error:\"\",sector:\"\",open:false,openAdd:false,getSector:[],adminId:localStorage.getItem('id'),openSector:false,serverDomain:'https://givealotcharities.herokuapp.com',frontEndDomain:'https://givealot.netlify.app'};return _this;}_createClass(OrganisationsDash,[{key:\"openDialog\",value:function openDialog(){this.setState({open:true});}},{key:\"openDialogAdd\",value:function openDialogAdd(){this.setState({openAdd:true});}},{key:\"componentDidMount\",value:function componentDidMount(){this.getSectors();this.getOrganisations();}},{key:\"getOrganisations\",value:function getOrganisations(){var _this2=this;var config={headers:{\"Content-Type\":\"application/json\",'Access-Control-Allow-Origin':'*'}};var adminUsersRequestBodyOrgs={\"adminId\":this.state.adminId};axios.post(this.state.serverDomain+'/v1/organisation/get/organisations',adminUsersRequestBodyOrgs,config).then(function(response){console.log(response);_this2.setState({org:response.data.response});}).catch(function(error){_this2.setState({error:'Error Retrieving data'});});}},{key:\"getSectors\",value:function getSectors(){var _this3=this;var config={headers:{\"Content-Type\":\"application/json\",'Access-Control-Allow-Origin':'*'}};axios.get(this.state.serverDomain+'/v1/organisation/get/sectors',config).then(function(response){_this3.setState({getSector:response.data.sectors});}).catch(function(error){_this3.setState({error:'Error Retrieving data'});});}},{key:\"render\",value:function render(){if(localStorage.getItem(\"id\")===null||localStorage.getItem(\"id\")===undefined||localStorage.getItem(\"id\")==='default'){window.location.href=this.state.frontEndDomain+\"/login\";}var _this$state=this.state,org=_this$state.org,getSector=_this$state.getSector,sector=_this$state.sector;return/*#__PURE__*/_jsxs(\"div\",{className:\"trythis\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(AdminSidebar,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"OrganisationsDash\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"userTitle\",children:\"All Organisations on Givealot\"}),/*#__PURE__*/_jsx(\"div\",{className:\"OrgAdd\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"orgAddBtn\",style:{display:\"flex\",alignItems:\"center\",alignContent:\"space-between\"},children:[/*#__PURE__*/_jsxs(Button,{variant:\"contained\",className:\"buttonAdd\",onClick:this.openDialogAdd.bind(this),children:[\"Add Organisation\",/*#__PURE__*/_jsx(AddCircleOutlinedIcon,{})]}),/*#__PURE__*/_jsxs(Dialog,{onClose:this.handleCloseAdd.bind(this),open:this.state.openAdd,children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"Add Organisation\"}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsx(AddOrg,{})})]}),/*#__PURE__*/_jsxs(Button,{variant:\"contained\",className:\"buttonAddSector\",onClick:this.openDialog.bind(this),children:[\"Create Sector\",/*#__PURE__*/_jsx(AddCircleOutlinedIcon,{})]}),/*#__PURE__*/_jsxs(Dialog,{onClose:this.handleClose.bind(this),open:this.state.open,style:{width:\"100%\"},children:[/*#__PURE__*/_jsx(DialogTitle,{style:{color:\"#957b9e\"},children:\"Create a Sector\"}),/*#__PURE__*/_jsx(DialogContent,{style:{display:\"flex\",alignItems:\"center\",justifyContent:\"center\"},children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.submitSector,children:[/*#__PURE__*/_jsx(TextField,{id:\"outlined-full-width\",label:\"Sector\",placeholder:\"Sector\",fullWidth:true,margin:\"normal\",variant:\"outlined\",name:\"sector\",onChange:this.changeHandler,value:sector}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",className:\"buttonAdd\",type:\"submit\",onSubmit:this.submitSector,children:\"Submit\"}),/*#__PURE__*/_jsxs(Dialog,{onClose:this.handleCloseSector.bind(this),open:this.state.openSector,children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"Sector Added\"}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:this.handleCloseSector.bind(this),style:{paddingTop:\"0.5em\",paddingBottom:\"0.5em\"},children:\"Close\"})})]})]}),/*#__PURE__*/_jsx(Divider,{style:{marginTop:\"2em\"}}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:\"1em\",marginTop:\"1em\",color:\"#957b9e\",fontSize:\"x-large\"},children:\"View Available Sectors\"}),/*#__PURE__*/_jsx(\"div\",{children:getSector.map(function(sector){return/*#__PURE__*/_jsx(\"li\",{value:sector,children:sector},sector);})})]})]})})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"table\",children:/*#__PURE__*/_jsx(Grid,{container:true,spacing:3,children:/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TableContainer,{component:Paper,children:/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(TableHead,{style:{backgroundColor:\"#957b9e\"},children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{}),/*#__PURE__*/_jsx(TableCell,{style:{color:\"white\",fontWeight:\"bold\"},children:\"Name\"}),/*#__PURE__*/_jsx(TableCell,{style:{color:\"white\",fontWeight:\"bold\"},children:\"Email\"}),/*#__PURE__*/_jsx(TableCell,{style:{color:\"white\",fontWeight:\"bold\"},children:\"Contact Person\"}),/*#__PURE__*/_jsx(TableCell,{style:{color:\"white\",fontWeight:\"bold\"},children:\"Contact Number\"}),/*#__PURE__*/_jsx(TableCell,{style:{color:\"white\",fontWeight:\"bold\"},children:\"Sector\"}),/*#__PURE__*/_jsx(TableCell,{style:{color:\"white\",fontWeight:\"bold\"},children:\"Status\"}),/*#__PURE__*/_jsx(TableCell,{})]})}),/*#__PURE__*/_jsx(TableBody,{children:org.map(function(item){return/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsxs(TableCell,{children:[/*#__PURE__*/_jsx(Avatar,{\"aria-label\":\"recipe\",src:item.logo}),\" \"]}),/*#__PURE__*/_jsx(TableCell,{children:item.orgName}),/*#__PURE__*/_jsx(TableCell,{children:item.orgEmail}),/*#__PURE__*/_jsx(TableCell,{children:item.contactPerson}),/*#__PURE__*/_jsx(TableCell,{children:item.contactNumber}),/*#__PURE__*/_jsx(TableCell,{children:item.orgSector}),/*#__PURE__*/_jsx(TableCell,{children:item.status}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Link,{to:\"/org/\"+item.orgId,className:\"link\",children:/*#__PURE__*/_jsx(EditIcon,{})})})]},item.orgId);})})]})})})})})]})]});}}]);return OrganisationsDash;}(Component);export default OrganisationsDash;","map":{"version":3,"sources":["C:/Users/Tshilidzi-PC/Documents/GitHub/Givee/Give-a-Lot/frontend/givealot/src/views/dashboard/sidebar/Components/OrganisationsDash/OrganisationsDash.js"],"names":["React","Component","Link","SearchIcon","AddCircleOutlinedIcon","Avatar","Button","Grid","axios","EditIcon","Dialog","DialogContent","DialogTitle","TextField","AddOrg","Divider","TableContainer","Paper","Table","TableHead","TableBody","TableRow","TableCell","AdminSidebar","OrganisationsDash","props","handleClose","setState","open","handleCloseAdd","openAdd","handleCloseSector","openSector","changeHandler","e","target","name","value","submitSector","preventDefault","config","headers","AddSector","state","sector","adminId","post","serverDomain","then","response","catch","error","console","log","org","getSector","localStorage","getItem","frontEndDomain","getSectors","getOrganisations","adminUsersRequestBodyOrgs","data","get","sectors","undefined","window","location","href","display","alignItems","alignContent","openDialogAdd","bind","openDialog","width","color","justifyContent","paddingTop","paddingBottom","marginTop","marginBottom","fontSize","map","backgroundColor","fontWeight","item","logo","orgName","orgEmail","contactPerson","contactNumber","orgSector","status","orgId"],"mappings":"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","sourcesContent":["import React , { Component } from 'react'\r\nimport { Link } from \"react-router-dom\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport AddCircleOutlinedIcon from \"@material-ui/icons/AddCircleOutlined\";\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button'\r\nimport \"../../styles/Organisations.css\"\r\nimport Grid from '@material-ui/core/Grid';\r\nimport axios from 'axios'\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport AddOrg from \"./AddOrg\";\r\nimport Divider from '@material-ui/core/Divider';\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport AdminSidebar from \"../DemoSidebar/AdminSidebar\";\r\n\r\nexport class OrganisationsDash extends Component {\r\n\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            org:[],\r\n            error: \"\",\r\n            sector: \"\",\r\n            open: false,\r\n            openAdd: false,\r\n            getSector: [],\r\n            adminId: localStorage.getItem('id'),\r\n            openSector: false,\r\n            serverDomain: 'https://givealotcharities.herokuapp.com',\r\n            frontEndDomain: 'https://givealot.netlify.app'\r\n        }\r\n    }\r\n\r\n    openDialog() {\r\n        this.setState({ open: true });\r\n    }\r\n    openDialogAdd() {\r\n        this.setState({ openAdd: true });\r\n    }\r\n\r\n    handleClose = () => {\r\n        this.setState({ open: false });\r\n    };\r\n\r\n    handleCloseAdd = () => {\r\n        this.setState({ openAdd: false });\r\n    };\r\n    handleCloseSector = () => {\r\n        this.setState({ openSector: false });\r\n\r\n    }\r\n\r\n    componentDidMount(){\r\n        this.getSectors();\r\n        this.getOrganisations();\r\n    }\r\n    getOrganisations(){\r\n        let config = {\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                'Access-Control-Allow-Origin': '*',\r\n            }\r\n        }\r\n        const adminUsersRequestBodyOrgs = {\r\n            \"adminId\" : this.state.adminId\r\n        }\r\n        axios.post(this.state.serverDomain + '/v1/organisation/get/organisations',adminUsersRequestBodyOrgs , config)\r\n            .then(response =>{\r\n                console.log(response)\r\n                this.setState({org: response.data.response})\r\n            })\r\n            .catch(error =>{\r\n                this.setState({error : 'Error Retrieving data'})\r\n            })\r\n    }\r\n    getSectors(){\r\n        let config = {\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                'Access-Control-Allow-Origin': '*',\r\n            }\r\n        }\r\n        axios.get(this.state.serverDomain + '/v1/organisation/get/sectors',  config)\r\n            .then(response =>{\r\n                this.setState({getSector: response.data.sectors})\r\n            })\r\n            .catch(error =>{\r\n                this.setState({error : 'Error Retrieving data'})\r\n            })\r\n    }\r\n\r\n    changeHandler = (e) =>{\r\n        this.setState({[e.target.name] : e.target.value})\r\n    }\r\n\r\n    submitSector = (e) =>{\r\n        e.preventDefault();\r\n        let config = {\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                'Access-Control-Allow-Origin': '*',\r\n            }\r\n        }\r\n        const AddSector = {\r\n            \"sector\" : this.state.sector,\r\n            \"adminId\" : this.state.adminId\r\n        }\r\n        axios.post(this.state.serverDomain + '/v1/organisation/add/sector', AddSector ,config)\r\n            .then(response =>{\r\n                this.setState({ openSector: true });\r\n            })\r\n            .catch(error =>{\r\n                console.log(error)\r\n            })\r\n    }\r\n\r\n    render () {\r\n        if(localStorage.getItem(\"id\") === null ||\r\n            localStorage.getItem(\"id\") === undefined ||\r\n            localStorage.getItem(\"id\") === 'default')\r\n        {\r\n            window.location.href = this.state.frontEndDomain + \"/login\";\r\n        }\r\n\r\n        const { org, getSector, sector } = this.state\r\n        return(\r\n            <div className=\"trythis\">\r\n\r\n                <div>\r\n                    <AdminSidebar />\r\n                </div>\r\n                <div className=\"OrganisationsDash\">\r\n                    <div className=\"userTitle\">\r\n                        All Organisations on Givealot\r\n                    </div>\r\n                    <div className=\"OrgAdd\">\r\n                        <div className=\"orgAddBtn\" style={{display: \"flex\", alignItems: \"center\", alignContent: \"space-between\"}}>\r\n                            <Button variant=\"contained\" className=\"buttonAdd\" onClick={this.openDialogAdd.bind(this)}>\r\n                                Add Organisation\r\n                                <AddCircleOutlinedIcon/>\r\n                            </Button>\r\n                            <Dialog onClose={this.handleCloseAdd.bind(this)} open={this.state.openAdd}>\r\n                                <DialogTitle>Add Organisation</DialogTitle>\r\n                                <DialogContent>\r\n                                    <AddOrg />\r\n                                </DialogContent>\r\n                            </Dialog>\r\n                            <Button variant=\"contained\" className=\"buttonAddSector\" onClick={this.openDialog.bind(this)}>\r\n                                Create Sector\r\n                                <AddCircleOutlinedIcon/>\r\n                            </Button>\r\n                            <Dialog onClose={this.handleClose.bind(this)} open={this.state.open} style={{width: \"100%\"}}>\r\n                                <DialogTitle style={{color: \"#957b9e\"}}>Create a Sector</DialogTitle>\r\n                                <DialogContent style={{display: \"flex\", alignItems: \"center\", justifyContent: \"center\"}}>\r\n                                    <div>\r\n                                        <form onSubmit={this.submitSector}>\r\n                                            <TextField\r\n                                                id=\"outlined-full-width\"\r\n                                                label=\"Sector\"\r\n                                                placeholder=\"Sector\"\r\n                                                fullWidth\r\n                                                margin=\"normal\"\r\n                                                variant=\"outlined\"\r\n                                                name=\"sector\"\r\n                                                onChange={this.changeHandler}\r\n                                                value={sector}\r\n                                            />\r\n                                            <Button variant=\"contained\" className=\"buttonAdd\" type=\"submit\"\r\n                                                    onSubmit={this.submitSector}\r\n                                            >\r\n                                                Submit\r\n                                            </Button>\r\n                                            <Dialog onClose={this.handleCloseSector.bind(this)} open={this.state.openSector}>\r\n                                                <DialogTitle>Sector Added</DialogTitle>\r\n                                                <DialogContent>\r\n                                                    <Button variant=\"contained\" color=\"primary\"\r\n                                                            onClick={this.handleCloseSector.bind(this)}\r\n                                                            style={{paddingTop: \"0.5em\", paddingBottom: \"0.5em\"}}\r\n                                                    >\r\n                                                        Close\r\n                                                    </Button>\r\n                                                </DialogContent>\r\n                                            </Dialog>\r\n                                        </form>\r\n                                        <Divider style={{marginTop: \"2em\"}}/>\r\n                                        <div>\r\n                                            <div style={{marginBottom: \"1em\",marginTop: \"1em\", color: \"#957b9e\",fontSize: \"x-large\"}}>View Available Sectors</div>\r\n                                            <div>\r\n                                                {getSector.map((sector) =>{\r\n                                                    return(\r\n                                                        <li key={sector} value={sector}>\r\n                                                            {sector}\r\n                                                        </li>\r\n                                                    )\r\n                                                })}\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </DialogContent>\r\n                            </Dialog>\r\n                        </div>\r\n                        {/*<div className=\"header__input\">*/}\r\n                        {/*    <input placeholder=\"search organisation\" type=\"text\" />*/}\r\n                        {/*    <SearchIcon/>*/}\r\n                        {/*</div>*/}\r\n                    </div>\r\n\r\n                    <div className=\"table\">\r\n                        <Grid container spacing={3}>\r\n                            <Grid item xs={12} >\r\n                                <TableContainer component={Paper}>\r\n                                    <Table >\r\n                                        <TableHead style={{backgroundColor: \"#957b9e\"}}>\r\n                                            <TableRow>\r\n                                                <TableCell></TableCell>\r\n                                                <TableCell style={{color: \"white\", fontWeight: \"bold\"}}>Name</TableCell>\r\n                                                <TableCell style={{color: \"white\", fontWeight: \"bold\"}}>Email</TableCell>\r\n                                                <TableCell style={{color: \"white\", fontWeight: \"bold\"}}>Contact Person</TableCell>\r\n                                                <TableCell style={{color: \"white\", fontWeight: \"bold\"}}>Contact Number</TableCell>\r\n                                                <TableCell style={{color: \"white\", fontWeight: \"bold\"}}>Sector</TableCell>\r\n                                                <TableCell style={{color: \"white\", fontWeight: \"bold\"}}>Status</TableCell>\r\n                                                <TableCell></TableCell>\r\n                                            </TableRow>\r\n                                        </TableHead>\r\n                                        <TableBody>\r\n                                            {org.map((item) =>{\r\n                                                return(\r\n                                                    <TableRow key={item.orgId}>\r\n                                                        <TableCell><Avatar aria-label=\"recipe\" src={item.logo} /> </TableCell>\r\n                                                        <TableCell>{item.orgName}</TableCell>\r\n                                                        <TableCell>{item.orgEmail}</TableCell>\r\n                                                        <TableCell>{item.contactPerson}</TableCell>\r\n                                                        <TableCell>{item.contactNumber}</TableCell>\r\n                                                        <TableCell>{item.orgSector}</TableCell>\r\n                                                        <TableCell>{item.status}</TableCell>\r\n                                                        <TableCell>\r\n                                                            <Link to={\"/org/\" + item.orgId} className=\"link\">\r\n                                                                <EditIcon />\r\n                                                            </Link>\r\n                                                        </TableCell>\r\n                                                    </TableRow>\r\n                                                )\r\n                                            })}\r\n                                        </TableBody>\r\n                                    </Table>\r\n                                </TableContainer>\r\n                            </Grid>\r\n                        </Grid>\r\n                    </div>\r\n                </div>\r\n\r\n    </div>\r\n\r\n            );\r\n    }\r\n\r\n\r\n}\r\n\r\nexport default OrganisationsDash\r\n"]},"metadata":{},"sourceType":"module"}