{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Tshilidzi-PC/Documents/GitHub/Givee/Give-a-Lot/frontend/givealot/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/Tshilidzi-PC/Documents/GitHub/Givee/Give-a-Lot/frontend/givealot/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/Tshilidzi-PC/Documents/GitHub/Givee/Give-a-Lot/frontend/givealot/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Box,TextField}from\"@material-ui/core\";import Button from\"@material-ui/core/Button\";import axios from\"axios\";import\"./Timeline.css\";import\"../../styles/Dashboard.css\";import React,{useContext,useEffect,useState}from\"react\";import Timeline from\"@material-ui/lab/Timeline\";import OrganisationTimeLineItem from\"../../../../browse/Components/OrganisationTimeLineItem/OrganisationTimeLineItem\";import{ApiContext}from\"../../../../../apiContext/ApiContext\";import OrgSidebar from\"../DemoSidebar/OrgSidebar\";import{FrontEndContext}from\"../../../../../apiContext/FrontEndContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function OrganisationTimeline(){var _useState=useState(\"https://givealotcharities.herokuapp.com\"),_useState2=_slicedToArray(_useState,2),serverDomain=_useState2[0],setServerDomain=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),timelineEvents=_useState4[0],setTimelineEvents=_useState4[1];var _useState5=useState(localStorage.getItem('id')),_useState6=_slicedToArray(_useState5,2),curr_organisation_id=_useState6[0],set_curr_organisation_id=_useState6[1];var _useState7=useState(\"https://givealot.netlify.app\"),_useState8=_slicedToArray(_useState7,2),frontEndDomain=_useState8[0],setFrontEndDomain=_useState8[1];if(localStorage.getItem(\"id\")===null||localStorage.getItem(\"id\")===undefined||localStorage.getItem(\"id\")==='default'){window.location.href=frontEndDomain+\"/login\";}var addTimelineEvent=function addTimelineEvent(event){event.preventDefault();var timelineTitle=document.getElementById(\"timeline-event-title-input\").value;var timelineDate=document.getElementById(\"timeline-event-date-input\").value;var timelineDescription=document.getElementById(\"timeline-event-description-input\").value;var addTimeLineEventRequest={orgId:localStorage.getItem('id'),eventDate:timelineDate,eventTitle:timelineTitle,eventShortDescription:timelineDescription};console.log(addTimeLineEventRequest);axios.post(serverDomain+'/event/add/timeline/',addTimeLineEventRequest).then(function(response){console.log(response);if(response){if(response.data.message.includes(\"success\")){window.location.href=frontEndDomain+\"/timeline\";}else{alert(response.data.message);}}}).catch(function(error){alert(\"error\");if(error.response){console.log(error.response);}else{console.error(error);}});};useEffect(function(){fetch(serverDomain+\"/event/get/timeline/\"+curr_organisation_id).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(response){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return response.json();case 2:data=_context.sent;if(!response.ok)/* error handling here */{if(response.status===500){alert(\"bad parameters, fatal\");}else if(response.status===401){alert(\"this token is unauthorized\");/* take them back to login */}if(typeof data!=='undefined'){alert(data.message);}}if(data.message===\"success\")/*successfully fetched*/{console.log(data.object);setTimelineEvents(data.object);}else{alert(\"error occured: \"+data.code);}case 5:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}()).catch(function(error){alert(\"failed - organisations - sector\");});},[]);var fetched_timeline_events=[];if(timelineEvents!==undefined){for(var i=0;i<timelineEvents.length;i++){var timeline_event_date=timelineEvents[i].eventDate;var timeline_event_title=timelineEvents[i].eventTitle;var timeline_event_id=timelineEvents[i].eventId;var timeline_event_description=timelineEvents[i].eventShortDescription;fetched_timeline_events.push(/*#__PURE__*/_jsx(OrganisationTimeLineItem,{id:timeline_event_id,date:timeline_event_date,title:timeline_event_title,description:timeline_event_description}));}}return/*#__PURE__*/_jsxs(\"div\",{className:\"trythis\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(OrgSidebar,{})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Box,{id:\"timeline_container\",children:[/*#__PURE__*/_jsxs(Box,{id:\"timeline_add_event_container\",children:[/*#__PURE__*/_jsx(\"p\",{id:\"timeline_title\",children:\"TIMELINE - REMEMBER WHAT'S IMPORTANT\"}),/*#__PURE__*/_jsx(\"p\",{id:\"timeline_slogan\",children:\"Keep everyone updated, add a timeline event for your organisation.\"}),/*#__PURE__*/_jsx(TextField,{className:\"timeline-text-field\",id:\"timeline-event-title-input\",variant:\"outlined\",label:\"event title\",type:\"text\"}),/*#__PURE__*/_jsx(TextField,{className:\"timeline-text-field\",id:\"timeline-event-date-input\",variant:\"outlined\",type:\"date\"}),/*#__PURE__*/_jsx(TextField,{className:\"timeline-text-field\",variant:\"outlined\",id:\"timeline-event-description-input\",label:\"describe the event\",placeholder:\"describe the event in 50 characters\",maxRows:2,multiline:true}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"secondary\",onClick:addTimelineEvent,children:\"add event\"})]}),/*#__PURE__*/_jsx(Box,{id:\"timeline-event-dashboard-container\",children:/*#__PURE__*/_jsx(Timeline,{align:\"alternate\",children:fetched_timeline_events})})]})})]});}export default OrganisationTimeline;","map":{"version":3,"sources":["C:/Users/Tshilidzi-PC/Documents/GitHub/Givee/Give-a-Lot/frontend/givealot/src/views/dashboard/sidebar/Components/Timeline/Timeline.js"],"names":["Box","TextField","Button","axios","React","useContext","useEffect","useState","Timeline","OrganisationTimeLineItem","ApiContext","OrgSidebar","FrontEndContext","OrganisationTimeline","serverDomain","setServerDomain","timelineEvents","setTimelineEvents","localStorage","getItem","curr_organisation_id","set_curr_organisation_id","frontEndDomain","setFrontEndDomain","undefined","window","location","href","addTimelineEvent","event","preventDefault","timelineTitle","document","getElementById","value","timelineDate","timelineDescription","addTimeLineEventRequest","orgId","eventDate","eventTitle","eventShortDescription","console","log","post","then","response","data","message","includes","alert","catch","error","fetch","json","ok","status","object","code","fetched_timeline_events","i","length","timeline_event_date","timeline_event_title","timeline_event_id","eventId","timeline_event_description","push"],"mappings":"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","sourcesContent":["import {Box, TextField} from \"@material-ui/core\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport axios from \"axios\";\r\nimport \"./Timeline.css\"\r\nimport \"../../styles/Dashboard.css\"\r\nimport React, {useContext, useEffect, useState} from \"react\";\r\nimport Timeline from \"@material-ui/lab/Timeline\";\r\nimport OrganisationTimeLineItem from \"../../../../browse/Components/OrganisationTimeLineItem/OrganisationTimeLineItem\";\r\nimport {ApiContext} from \"../../../../../apiContext/ApiContext\";\r\nimport OrgSidebar from \"../DemoSidebar/OrgSidebar\";\r\nimport {FrontEndContext} from \"../../../../../apiContext/FrontEndContext\";\r\n\r\nfunction OrganisationTimeline()\r\n{\r\n    const [serverDomain, setServerDomain] = useState(\"https://givealotcharities.herokuapp.com\")\r\n    let [timelineEvents, setTimelineEvents] = useState([]);\r\n    let [curr_organisation_id, set_curr_organisation_id] = useState(localStorage.getItem('id'));\r\n    const [frontEndDomain, setFrontEndDomain] = useState(\"https://givealot.netlify.app\");\r\n\r\n    if(localStorage.getItem(\"id\") === null ||\r\n        localStorage.getItem(\"id\") === undefined ||\r\n        localStorage.getItem(\"id\") === 'default')\r\n    {\r\n\r\n        window.location.href = frontEndDomain + \"/login\";\r\n    }\r\n\r\n    const addTimelineEvent = event =>\r\n    {\r\n        event.preventDefault();\r\n        let timelineTitle = document.getElementById(\"timeline-event-title-input\").value;\r\n        let timelineDate = document.getElementById(\"timeline-event-date-input\").value;\r\n        let timelineDescription = document.getElementById(\"timeline-event-description-input\").value;\r\n\r\n        const addTimeLineEventRequest =\r\n        {\r\n            orgId : localStorage.getItem('id'),\r\n            eventDate: timelineDate,\r\n            eventTitle : timelineTitle,\r\n            eventShortDescription : timelineDescription\r\n        }\r\n\r\n        console.log(addTimeLineEventRequest)\r\n\r\n        axios.post(serverDomain + '/event/add/timeline/', addTimeLineEventRequest)\r\n        .then(response =>\r\n        {\r\n            console.log(response)\r\n            if(response)\r\n            {\r\n                if(response.data.message.includes(\"success\"))\r\n                {\r\n                    window.location.href = frontEndDomain + \"/timeline\";\r\n                }\r\n                else\r\n                {\r\n                    alert(response.data.message);\r\n                }\r\n            }\r\n        })\r\n        .catch(error =>\r\n        {\r\n            alert(\"error\")\r\n            if(error.response)\r\n            {\r\n                console.log(error.response)\r\n            }\r\n            else\r\n            {\r\n                console.error(error)\r\n            }\r\n        })\r\n    }\r\n\r\n    useEffect(() => {\r\n            fetch( serverDomain + \"/event/get/timeline/\" + curr_organisation_id)\r\n                .then(async response =>{\r\n\r\n                    const data = await response.json();\r\n\r\n                    if(!response.ok) /* error handling here */\r\n                    {\r\n                        if(response.status === 500)\r\n                        {\r\n                            alert(\"bad parameters, fatal\");\r\n                        }\r\n                        else if(response.status === 401)\r\n                        {\r\n                            alert(\"this token is unauthorized\"); /* take them back to login */\r\n                        }\r\n\r\n                        if(typeof data !== 'undefined')\r\n                        {\r\n                            alert(data.message);\r\n                        }\r\n                    }\r\n\r\n                    if(data.message === \"success\") /*successfully fetched*/\r\n                    {\r\n                        console.log(data.object);\r\n                        setTimelineEvents(data.object)\r\n                    }\r\n                    else\r\n                    {\r\n                        alert(\"error occured: \" + data.code);\r\n                    }\r\n                })\r\n\r\n                .catch(error => {\r\n                    alert(\"failed - organisations - sector\")\r\n                });\r\n        }\r\n        ,[])\r\n\r\n    let fetched_timeline_events = [];\r\n    if(timelineEvents !== undefined)\r\n    {\r\n        for (let i = 0; i < timelineEvents.length; i++)\r\n        {\r\n            let timeline_event_date = timelineEvents[i].eventDate;\r\n            let timeline_event_title = timelineEvents[i].eventTitle;\r\n            let timeline_event_id = timelineEvents[i].eventId;\r\n            let timeline_event_description = timelineEvents[i].eventShortDescription;\r\n\r\n            fetched_timeline_events.push(\r\n                <OrganisationTimeLineItem id={timeline_event_id}\r\n                                          date={timeline_event_date}\r\n                                          title={timeline_event_title}\r\n                                          description={timeline_event_description}\r\n                />\r\n            )\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"trythis\">\r\n            <div>\r\n                <OrgSidebar />\r\n            </div>\r\n        <div>\r\n            <Box id={\"timeline_container\"}>\r\n                <Box id={\"timeline_add_event_container\"}>\r\n                    <p id={\"timeline_title\"}>TIMELINE - REMEMBER WHAT'S IMPORTANT</p>\r\n                    <p id={\"timeline_slogan\"}>\r\n                        Keep everyone updated, add a timeline event\r\n                        for your organisation.\r\n                    </p>\r\n\r\n                    <TextField\r\n                        className={\"timeline-text-field\"}\r\n                        id={\"timeline-event-title-input\"}\r\n                        variant={\"outlined\"}\r\n                        label=\"event title\"\r\n                        type=\"text\"\r\n                    />\r\n\r\n                    <TextField\r\n                        className={\"timeline-text-field\"}\r\n                        id={\"timeline-event-date-input\"}\r\n                        variant={\"outlined\"}\r\n                        type=\"date\"\r\n                    />\r\n\r\n                    <TextField\r\n                        className={\"timeline-text-field\"}\r\n                        variant={\"outlined\"}\r\n                        id={\"timeline-event-description-input\"}\r\n                        label=\"describe the event\"\r\n                        placeholder=\"describe the event in 50 characters\"\r\n                        maxRows={2}\r\n                        multiline\r\n                    />\r\n\r\n                    <Button\r\n                        variant={\"contained\"}\r\n                        color={\"secondary\"}\r\n                        onClick={addTimelineEvent}\r\n                    >\r\n                        add event\r\n                    </Button>\r\n                </Box>\r\n\r\n                <Box id={\"timeline-event-dashboard-container\"}>\r\n                    <Timeline align=\"alternate\">\r\n                        {fetched_timeline_events}\r\n                    </Timeline>\r\n                </Box>\r\n\r\n            </Box>\r\n        </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default OrganisationTimeline;\r\n"]},"metadata":{},"sourceType":"module"}