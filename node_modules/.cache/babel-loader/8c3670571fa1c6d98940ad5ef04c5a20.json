{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Tshilidzi-PC\\\\Documents\\\\GitHub\\\\Givee\\\\Give-a-Lot\\\\frontend\\\\givealot\\\\src\\\\views\\\\registration\\\\registerUser\\\\RegisterUser.js\";\nimport React, { Component } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport \"./Styles/RegisterUser.css\";\nimport backgroundImg from \"../../../assets/homeBackground.jpg\";\nimport Logo from \"../../login/Components/Logo\";\nimport ArrowBackIcon from \"@material-ui/icons/ArrowBack\";\nimport axios from \"axios\";\nimport { Alert } from \"@material-ui/lab\";\nimport { ApiContext } from \"../../../apiContext/ApiContext\";\nimport { TextField } from \"@material-ui/core\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst styles = {\n  main: {\n    backgroundImage: `url(${backgroundImg})`\n  }\n};\n\nclass RegisterUser extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      firstName: \"\",\n      lastName: \"\",\n      email: \"\",\n      password: \"\",\n      fnameError: \"\",\n      lnameError: \"\",\n      emailError: \"\",\n      passwordError: \"\",\n      serverDomain: this.context\n    };\n\n    this.handleChange = event => {\n      const isCheckbox = event.target.type === \"checkbox\";\n      this.setState({\n        [event.target.name]: isCheckbox ? event.target.checked : event.target.value\n      });\n    };\n\n    this.validate = () => {\n      let fnameError = \"\";\n      let lnameError = \"\";\n      let emailError = \"\";\n      let passwordError = \"\";\n\n      if (!this.state.firstName) {\n        fnameError = \"first name is required\";\n      }\n\n      if (!this.state.lastName) {\n        lnameError = \"Last name is required\";\n      }\n\n      if (!this.state.email.includes(\"@\")) {\n        emailError = \"invalid email\";\n      }\n\n      if (this.state.password.length < 8) {\n        passwordError = \"passwords must be 8 characters long and above\";\n      }\n\n      if (emailError || fnameError || lnameError || passwordError) {\n        this.setState({\n          emailError,\n          fnameError,\n          lnameError,\n          passwordError\n        });\n        return false;\n      }\n\n      return true;\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n      const isValid = this.validate();\n\n      if (isValid) {\n        const data = {\n          firstName: this.state.firstName,\n          lastName: this.state.lastName,\n          email: this.state.email,\n          password: this.state.password\n        };\n        document.getElementById(\"emailError\").style.display = \"none\";\n        document.getElementById(\"registrationInfoPrompt\").style.display = \"none\";\n        document.getElementById(\"registrationInfoPromptWait\").style.display = \"flex\";\n        axios.post(this.state.serverDomain + '/v1/user/register/user', data).then(response => {\n          if (response) {\n            if (response.data.message.includes(\"success\")) {\n              document.getElementById(\"registrationInfoPromptWait\").style.display = \"none\";\n              document.getElementById(\"registrationInfoPrompt\").style.display = \"flex\";\n              setTimeout(function () {\n                window.location.assign(\"/login\");\n              }, 3000);\n            } else {\n              alert(response.data.message);\n            }\n          }\n        }).catch(error => {\n          if (error.response) {\n            console.log(error.response);\n\n            if (error.response.data.message.includes(\"the_email_already_been_taken\")) {\n              document.getElementById(\"registrationInfoPromptWait\").style.display = \"none\";\n              document.getElementById(\"registrationInfoPrompt\").style.display = \"none\";\n              document.getElementById(\"emailError\").style.display = \"flex\";\n            } else {}\n          } else {\n            console.error(error);\n          }\n        });\n      }\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"registerUser\",\n        style: styles.main,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"banner_filter\",\n          children: [/*#__PURE__*/_jsxDEV(Logo, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/signUp\",\n            children: /*#__PURE__*/_jsxDEV(ArrowBackIcon, {\n              style: {\n                color: \"white\",\n                marginLeft: \"30px\",\n                fontSize: \"xx-large\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"registerUserCard\",\n            children: [/*#__PURE__*/_jsxDEV(Alert, {\n              severity: \"error\",\n              id: \"emailError\",\n              children: \"the provided email is already taken...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Alert, {\n              severity: \"success\",\n              id: \"registrationInfoPrompt\",\n              children: \"registration complete - please wait for redirection\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Alert, {\n              severity: \"info\",\n              id: \"registrationInfoPromptWait\",\n              children: \"please wait...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 145,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"wrapp\",\n              children: /*#__PURE__*/_jsxDEV(\"form\", {\n                className: \"registerUserForm\",\n                onSubmit: this.handleSubmit,\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"registerUserHeader\",\n                  children: \"Sign Up\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 148,\n                  columnNumber: 32\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"names\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"registerUserInput1\",\n                    \"data-validate\": \"Username is required\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"registerUserInputLabel\",\n                      children: \"First Name\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 153,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: /*#__PURE__*/_jsxDEV(TextField, {\n                        className: \"nameFields validate\",\n                        type: \"text\",\n                        name: \"firstName\",\n                        variant: \"outlined\",\n                        placeholder: \"Enter your first name\",\n                        onChange: this.handleChange\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 157,\n                        columnNumber: 49\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 156,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"error\",\n                      children: this.state.fnameError\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 166,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 152,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"registerUserInput1\",\n                    \"data-validate\": \"Username is required\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"registerUserInputLabel\",\n                      children: \"Last Name\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 170,\n                      columnNumber: 37\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: /*#__PURE__*/_jsxDEV(TextField, {\n                        className: \"nameFields validate\",\n                        type: \"text\",\n                        name: \"lastName\",\n                        variant: \"outlined\",\n                        placeholder: \"Enter your last name\",\n                        onChange: this.handleChange\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 174,\n                        columnNumber: 49\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 173,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"error\",\n                      children: this.state.lnameError\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 183,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 169,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 151,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"registerUserInput\",\n                  \"data-validate\": \"surname is required\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"registerUserInputLabel\",\n                    children: \"Email\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 189,\n                    columnNumber: 37\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: /*#__PURE__*/_jsxDEV(TextField, {\n                      className: \"registerUserInnerInput validate\",\n                      type: \"email\",\n                      name: \"email\",\n                      variant: \"outlined\",\n                      placeholder: \"Enter your Email\" // value={this.state.email}\n                      ,\n                      onChange: this.handleChange\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 193,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 192,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"error\",\n                    children: this.state.emailError\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 203,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 188,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"registerUserInput\",\n                  \"data-validate\": \"Username is required\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"registerUserInputLabel\",\n                    children: \"Password\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 208,\n                    columnNumber: 37\n                  }, this), /*#__PURE__*/_jsxDEV(TextField, {\n                    className: \"registerUserInnerInput validate\",\n                    type: \"password\",\n                    name: \"password\",\n                    minLength: \"8\",\n                    variant: \"outlined\",\n                    placeholder: \"Enter your password\",\n                    onChange: this.handleChange\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 212,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"error\",\n                    children: this.state.passwordError\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 222,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 207,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"wrapp-btn\",\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"registerUser-btn\",\n                    type: \"submit\",\n                    onClick: this.handleSubmit,\n                    children: \"Sign Up\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 226,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 225,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 147,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nRegisterUser.contextType = ApiContext;\nexport default RegisterUser;","map":{"version":3,"sources":["C:/Users/Tshilidzi-PC/Documents/GitHub/Givee/Give-a-Lot/frontend/givealot/src/views/registration/registerUser/RegisterUser.js"],"names":["React","Component","Link","useHistory","backgroundImg","Logo","ArrowBackIcon","axios","Alert","ApiContext","TextField","styles","main","backgroundImage","RegisterUser","state","firstName","lastName","email","password","fnameError","lnameError","emailError","passwordError","serverDomain","context","handleChange","event","isCheckbox","target","type","setState","name","checked","value","validate","includes","length","handleSubmit","preventDefault","isValid","data","document","getElementById","style","display","post","then","response","message","setTimeout","window","location","assign","alert","catch","error","console","log","render","color","marginLeft","fontSize","contextType"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport {Link, useHistory} from \"react-router-dom\";\r\nimport \"./Styles/RegisterUser.css\";\r\nimport backgroundImg from \"../../../assets/homeBackground.jpg\";\r\nimport Logo from \"../../login/Components/Logo\";\r\nimport ArrowBackIcon from \"@material-ui/icons/ArrowBack\";\r\nimport axios from \"axios\";\r\nimport {Alert} from \"@material-ui/lab\";\r\n\r\nimport {ApiContext} from \"../../../apiContext/ApiContext\";\r\nimport {TextField} from \"@material-ui/core\";\r\n\r\nconst styles = {\r\n    main: {\r\n        backgroundImage: `url(${backgroundImg})`\r\n    }\r\n}\r\n\r\nclass RegisterUser extends Component {\r\n\r\n    static contextType = ApiContext;\r\n\r\n    state = {\r\n        firstName: \"\",\r\n        lastName: \"\",\r\n        email: \"\",\r\n        password: \"\",\r\n        fnameError: \"\",\r\n        lnameError: \"\",\r\n        emailError: \"\",\r\n        passwordError: \"\",\r\n        serverDomain : this.context\r\n    };\r\n\r\n    handleChange = event => {\r\n        const isCheckbox = event.target.type === \"checkbox\";\r\n        this.setState({\r\n            [event.target.name]: isCheckbox\r\n                ? event.target.checked\r\n                : event.target.value\r\n        });\r\n    };\r\n\r\n    validate = () => {\r\n        let fnameError = \"\";\r\n        let lnameError = \"\";\r\n        let emailError = \"\";\r\n        let passwordError = \"\";\r\n\r\n        if (!this.state.firstName) {\r\n            fnameError = \"first name is required\";\r\n        }\r\n        if (!this.state.lastName) {\r\n            lnameError = \"Last name is required\";\r\n        }\r\n\r\n        if (!this.state.email.includes(\"@\")) {\r\n            emailError = \"invalid email\";\r\n        }\r\n\r\n        if(this.state.password.length <8) {\r\n            passwordError=\"passwords must be 8 characters long and above\";\r\n        }\r\n\r\n        if (emailError || fnameError|| lnameError || passwordError) {\r\n            this.setState({ emailError, fnameError,lnameError, passwordError });\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    };\r\n\r\n    handleSubmit = event => {\r\n        event.preventDefault();\r\n\r\n\r\n        const isValid = this.validate();\r\n\r\n        if (isValid)\r\n        {\r\n            const data = {\r\n                firstName: this.state.firstName,\r\n                lastName: this.state.lastName,\r\n                email: this.state.email,\r\n                password: this.state.password,\r\n            };\r\n\r\n            document.getElementById(\"emailError\").style.display = \"none\";\r\n            document.getElementById(\"registrationInfoPrompt\").style.display = \"none\";\r\n            document.getElementById(\"registrationInfoPromptWait\").style.display = \"flex\";\r\n            axios.post(this.state.serverDomain + '/v1/user/register/user', data)\r\n                .then(response =>\r\n                {\r\n                    if(response)\r\n                    {\r\n                        if(response.data.message.includes(\"success\"))\r\n                        {\r\n                            document.getElementById(\"registrationInfoPromptWait\").style.display = \"none\";\r\n                            document.getElementById(\"registrationInfoPrompt\").style.display = \"flex\";\r\n                            setTimeout(function(){\r\n                                window.location.assign(\"/login\");\r\n                            }, 3000);\r\n                        }\r\n                        else\r\n                        {\r\n                            alert(response.data.message);\r\n                        }\r\n                    }\r\n                })\r\n                .catch(error =>{\r\n                    if(error.response)\r\n                    {\r\n                        console.log(error.response)\r\n                        if(error.response.data.message.includes(\"the_email_already_been_taken\"))\r\n                        {\r\n                            document.getElementById(\"registrationInfoPromptWait\").style.display = \"none\";\r\n                            document.getElementById(\"registrationInfoPrompt\").style.display = \"none\";\r\n                            document.getElementById(\"emailError\").style.display = \"flex\";\r\n                        }\r\n                        else\r\n                        {\r\n\r\n                        }\r\n                    }\r\n                    else\r\n                    {\r\n                        console.error(error)\r\n                    }\r\n                })\r\n        }\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <div className=\"registerUser\" style={styles.main}>\r\n                    <div  id={\"banner_filter\"}>\r\n                        <Logo/>\r\n                        <Link to={\"/signUp\"}>\r\n                            <ArrowBackIcon style={{color: \"white\", marginLeft: \"30px\", fontSize: \"xx-large\"}}/>\r\n                        </Link>\r\n                        <div className=\"registerUserCard\">\r\n                            <Alert severity=\"error\" id={\"emailError\"}>the provided email is already taken...</Alert>\r\n                            <Alert severity=\"success\" id={\"registrationInfoPrompt\"}>registration complete - please wait for redirection</Alert>\r\n                            <Alert severity=\"info\" id={\"registrationInfoPromptWait\"}>please wait...</Alert>\r\n                            <div className=\"wrapp\">\r\n                                <form className=\"registerUserForm\" onSubmit={this.handleSubmit}>\r\n                               <span className=\"registerUserHeader\">\r\n                                   Sign Up\r\n                               </span>\r\n                                    <div className=\"names\">\r\n                                        <div className=\"registerUserInput1\" data-validate=\"Username is required\">\r\n                                        <span className=\"registerUserInputLabel\">\r\n                                            First Name\r\n                                        </span>\r\n                                            <div>\r\n                                                <TextField\r\n                                                    className=\"nameFields validate\"\r\n                                                    type=\"text\"\r\n                                                    name=\"firstName\"\r\n                                                    variant={\"outlined\"}\r\n                                                    placeholder=\"Enter your first name\"\r\n                                                    onChange={this.handleChange}\r\n                                                />\r\n                                            </div>\r\n                                            <span className=\"error\">{this.state.fnameError}</span>\r\n                                        </div>\r\n\r\n                                        <div className=\"registerUserInput1\" data-validate=\"Username is required\">\r\n                                    <span className=\"registerUserInputLabel\">\r\n                                        Last Name\r\n                                    </span>\r\n                                            <div>\r\n                                                <TextField\r\n                                                    className=\"nameFields validate\"\r\n                                                    type=\"text\"\r\n                                                    name=\"lastName\"\r\n                                                    variant={\"outlined\"}\r\n                                                    placeholder=\"Enter your last name\"\r\n                                                    onChange={this.handleChange}\r\n                                                />\r\n                                            </div>\r\n                                            <span className=\"error\">{this.state.lnameError}</span>\r\n                                        </div>\r\n\r\n                                    </div>\r\n\r\n                                    <div className=\"registerUserInput\" data-validate=\"surname is required\">\r\n                                    <span className=\"registerUserInputLabel\">\r\n                                        Email\r\n                                    </span>\r\n                                        <div>\r\n                                            <TextField\r\n                                                className=\"registerUserInnerInput validate\"\r\n                                                type=\"email\"\r\n                                                name=\"email\"\r\n                                                variant={\"outlined\"}\r\n                                                placeholder=\"Enter your Email\"\r\n                                                // value={this.state.email}\r\n                                                onChange={this.handleChange}/>\r\n\r\n                                        </div>\r\n                                        <span className=\"error\">{this.state.emailError}</span>\r\n                                    </div>\r\n\r\n\r\n                                    <div className=\"registerUserInput\" data-validate=\"Username is required\">\r\n                                    <span className=\"registerUserInputLabel\">\r\n                                        Password\r\n                                    </span>\r\n\r\n                                        <TextField\r\n                                            className=\"registerUserInnerInput validate\"\r\n                                            type=\"password\"\r\n                                            name=\"password\"\r\n                                            minLength=\"8\"\r\n                                            variant={\"outlined\"}\r\n                                            placeholder=\"Enter your password\"\r\n                                            onChange={this.handleChange}\r\n                                        />\r\n\r\n                                        <span className=\"error\">{this.state.passwordError}</span>\r\n                                    </div>\r\n\r\n                                    <div className=\"wrapp-btn\">\r\n                                        <button className=\"registerUser-btn\" type=\"submit\" onClick={this.handleSubmit}>\r\n                                            Sign Up\r\n                                        </button>\r\n                                    </div>\r\n                                </form>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\nexport default RegisterUser;\r\n"]},"metadata":{},"sourceType":"module"}