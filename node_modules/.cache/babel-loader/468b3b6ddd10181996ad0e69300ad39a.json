{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Tshilidzi-PC\\\\Documents\\\\GitHub\\\\Givee\\\\Give-a-Lot\\\\frontend\\\\givealot\\\\src\\\\components\\\\admin\\\\emails\\\\Emails.js\";\n// // import React, { Component } from 'react'\n// // import Mailer from \"./Mailer\"\n// // import \"./Email.css\"\n// //\n// //\n// // export class Emails extends Component {\n// //\n// //     render() {\n// //         return (\n// //             <div className=\"email\">\n// //                 <Mailer/>\n// //             </div>\n// //         )\n// //     }\n// // }\n// //\n// // export default Emails\n//\n// import React from 'react';\n// import axios from 'axios';\n//\n// class Emails extends React.Component {\n//\n//     constructor(props) {\n//         super(props);\n//         this.state = {\n//             name: '',\n//             email: '',\n//             message: ''\n//         }\n//     }\n//\n//     handleSubmit(e){\n//         e.preventDefault();\n//         axios({\nimport React, { Component } from 'react';\nimport ToolbarComponent from './ToolbarComponent';\nimport MessagesComponent from './MessagesComponent';\nimport ComposeMessageComponent from './ComposeMessageComponent';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Emails extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      messages: []\n    };\n\n    this.componentDidMount = async () => {\n      const response = await fetch('http://localhost:8082/api/messages');\n      const messages = await response.json();\n      this.setState({\n        messages: [...this.state.messages, ...messages.map(message => ({ ...message,\n          selected: false\n        }))],\n        display: false\n      });\n    };\n\n    this.toggleCompose = () => {\n      this.setState({\n        display: !this.state.display\n      });\n    };\n\n    this.toggleSelectAll = () => {\n      const selectedMessages = this.state.messages.filter(message => message.selected);\n      const selected = selectedMessages.length !== this.state.messages.length;\n      this.setState({\n        messages: this.state.messages.map(message => message.selected !== selected ? { ...message,\n          selected\n        } : message)\n      });\n    };\n\n    this.toggleSelect = () => {\n      const selectedMessages = this.state.messages.filter(message => message.selected);\n      const selected = selectedMessages.length !== this.state.messages.length;\n      this.setState({\n        messages: this.state.messages.map(message => message.selected !== selected ? { ...message,\n          selected\n        } : message)\n      });\n    };\n\n    this.toggleProperty = async (message, property) => {\n      const index = this.state.messages.indexOf(message);\n      this.setState({\n        messages: [...this.state.messages.slice(0, index), { ...message,\n          [property]: !message[property]\n        }, ...this.state.messages.slice(index + 1)]\n      });\n    };\n\n    this.toggleStar = async message => {\n      await fetch('http://localhost:8082/api/messages', {\n        method: 'PATCH',\n        body: JSON.stringify({\n          messageIds: [message.id],\n          command: 'star',\n          star: message.starred\n        }),\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        }\n      });\n      this.toggleProperty(message, 'starred');\n    };\n\n    this.toggleSelect = message => {\n      this.toggleProperty(message, 'selected');\n    };\n\n    this.addMessage = async composeMessage => {\n      const {\n        subject,\n        body\n      } = composeMessage;\n      const response = await fetch('http://localhost:8082/api/messages', {\n        method: 'POST',\n        body: JSON.stringify({\n          subject,\n          body\n        }),\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        }\n      });\n      const message = await response.json(); // console.log('messages==> ', this.state.messages);\n      // console.log('new message==> ', message);\n\n      this.setState({\n        messages: [...this.state.messages, message],\n        display: !this.state.display\n      });\n      console.log(this.state);\n    };\n\n    this.deleteMessages = async () => {\n      const messages = this.state.messages.filter(message => !message.selected); // Filter out the selected messages\n\n      const selectedMessages = this.state.messages.filter(message => message.selected);\n      await fetch('http://localhost:8082/api/messages', {\n        method: 'PATCH',\n        body: JSON.stringify({\n          messageIds: [...selectedMessages.map(message => message.id)],\n          command: 'delete'\n        }),\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        }\n      });\n      this.setState({\n        messages\n      });\n    };\n\n    this.applyLabel = async label => {\n      const messages = this.state.messages.map(message => message.selected && !message.labels.includes(label) ? { ...message,\n        labels: [...message.labels, label].sort()\n      } : message); // Filter out the selected messages\n\n      const selectedMessages = this.state.messages.filter(message => message.selected);\n      await fetch('http://localhost:8082/api/messages', {\n        method: 'PATCH',\n        body: JSON.stringify({\n          messageIds: [...selectedMessages.map(message => message.id)],\n          command: 'addLabel',\n          label\n        }),\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        }\n      });\n      this.setState({\n        messages\n      });\n    };\n\n    this.removeLabel = async label => {\n      const messages = this.state.messages.map(message => {\n        const index = message.labels.indexOf(label);\n\n        if (message.selected && index > -1) {\n          return { ...message,\n            labels: [...message.labels.slice(0, index), ...message.labels.slice(index + 1)]\n          };\n        }\n\n        return message;\n      }); // Filter out the selected messages\n\n      const selectedMessages = this.state.messages.filter(message => message.selected);\n      await fetch('http://localhost:8082/api/messages', {\n        method: 'PATCH',\n        body: JSON.stringify({\n          messageIds: [...selectedMessages.map(message => message.id)],\n          command: 'removeLabel',\n          label\n        }),\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        }\n      });\n      this.setState({\n        messages\n      });\n    };\n  }\n\n  // ================================================\n  // Render\n  // ================================================\n  render() {\n    // console.log(this.state)\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: [/*#__PURE__*/_jsxDEV(ToolbarComponent, {\n        messages: this.state.messages,\n        toggleCompose: this.toggleCompose,\n        toggleSelectAll: this.toggleSelectAll,\n        markReadStatus: this.markReadStatus,\n        deleteMessages: this.deleteMessages,\n        applyLabel: this.applyLabel,\n        removeLabel: this.removeLabel\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 346,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(ComposeMessageComponent, {\n        display: this.state.display,\n        addMessage: this.addMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(MessagesComponent, {\n        messages: this.state.messages,\n        toggleStar: this.toggleStar,\n        toggleSelect: this.toggleSelect\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 345,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default Emails;","map":{"version":3,"sources":["C:/Users/Tshilidzi-PC/Documents/GitHub/Givee/Give-a-Lot/frontend/givealot/src/components/admin/emails/Emails.js"],"names":["React","Component","ToolbarComponent","MessagesComponent","ComposeMessageComponent","Emails","state","messages","componentDidMount","response","fetch","json","setState","map","message","selected","display","toggleCompose","toggleSelectAll","selectedMessages","filter","length","toggleSelect","toggleProperty","property","index","indexOf","slice","toggleStar","method","body","JSON","stringify","messageIds","id","command","star","starred","headers","addMessage","composeMessage","subject","console","log","deleteMessages","applyLabel","label","labels","includes","sort","removeLabel","render","markReadStatus"],"mappings":"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","sourcesContent":["// // import React, { Component } from 'react'\r\n// // import Mailer from \"./Mailer\"\r\n// // import \"./Email.css\"\r\n// //\r\n// //\r\n// // export class Emails extends Component {\r\n// //\r\n// //     render() {\r\n// //         return (\r\n// //             <div className=\"email\">\r\n// //                 <Mailer/>\r\n// //             </div>\r\n// //         )\r\n// //     }\r\n// // }\r\n// //\r\n// // export default Emails\r\n//\r\n// import React from 'react';\r\n// import axios from 'axios';\r\n//\r\n// class Emails extends React.Component {\r\n//\r\n//     constructor(props) {\r\n//         super(props);\r\n//         this.state = {\r\n//             name: '',\r\n//             email: '',\r\n//             message: ''\r\n//         }\r\n//     }\r\n//\r\n//     handleSubmit(e){\r\n//         e.preventDefault();\r\n//         axios({\r\n\r\n\r\nimport React, { Component } from 'react';\r\nimport ToolbarComponent from './ToolbarComponent'\r\nimport MessagesComponent from './MessagesComponent'\r\nimport ComposeMessageComponent from './ComposeMessageComponent'\r\n\r\nclass Emails extends Component {\r\n\r\n\r\n\r\n    state = {\r\n        messages: []\r\n    }\r\n\r\n    // ================================================\r\n    // React Life Cycle\r\n    // ================================================\r\n    componentDidMount = async () => {\r\n        const response = await fetch('http://localhost:8082/api/messages')\r\n        const messages = await response.json()\r\n\r\n        this.setState({\r\n            messages: [\r\n                ...this.state.messages,\r\n                ...messages.map(message => ({\r\n                    ...message,\r\n                    selected: false\r\n                }))\r\n            ],\r\n            display: false\r\n        })\r\n    }\r\n\r\n    // ================================================\r\n    // Toggle Compose\r\n    // ================================================\r\n    toggleCompose = () => {\r\n        this.setState({ display: !this.state.display })\r\n    }\r\n\r\n    // ================================================\r\n    // Toggle Select All\r\n    // ================================================\r\n    toggleSelectAll = () => {\r\n        const selectedMessages = this.state.messages.filter(message => message.selected)\r\n\r\n        const selected = selectedMessages.length !== this.state.messages.length\r\n        this.setState({\r\n            messages: this.state.messages.map(message => message.selected !== selected ? { ...message, selected } : message)\r\n        })\r\n    }\r\n\r\n    toggleSelect = () => {\r\n        const selectedMessages = this.state.messages.filter(message => message.selected)\r\n\r\n        const selected = selectedMessages.length !== this.state.messages.length\r\n        this.setState({\r\n            messages: this.state.messages.map(message => message.selected !== selected ? { ...message, selected } : message)\r\n        })\r\n    }\r\n\r\n\r\n    // ================================================\r\n    // Toggle Property\r\n    // ================================================\r\n    // toggleProperty(message, property) {\r\n    //   const index = this.state.messages.indexOf(message);\r\n    //   this.setState({\r\n    //     messages: [\r\n    //       ...this.state.messages.slice(0, index),\r\n    //       {...message, [property]: !message[property]},\r\n    //       ...this.state.messages.slice(index + 1)\r\n    //     ]\r\n    //   });\r\n    // }\r\n\r\n    toggleProperty = async (message, property) => {\r\n        const index = this.state.messages.indexOf(message)\r\n\r\n        this.setState({\r\n            messages: [\r\n                ...this.state.messages.slice(0, index),\r\n                { ...message, [property]: !message[property] },\r\n                ...this.state.messages.slice(index + 1)\r\n            ]\r\n        })\r\n    }\r\n\r\n    // ================================================\r\n    // Toggle Start\r\n    // ================================================\r\n    // toggleStar = message => {\r\n    //   this.toggleProperty(message, 'starred');\r\n    // }\r\n\r\n    toggleStar = async message => {\r\n        await fetch('http://localhost:8082/api/messages', {\r\n            method: 'PATCH',\r\n            body: JSON.stringify({\r\n                messageIds: [message.id],\r\n                command: 'star',\r\n                star: message.starred\r\n            }),\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Accept': 'application/json'\r\n            }\r\n        })\r\n\r\n        this.toggleProperty(message, 'starred')\r\n    }\r\n\r\n    // ================================================\r\n    // Toggle Select\r\n    // ================================================\r\n    toggleSelect = message => {\r\n        this.toggleProperty(message, 'selected');\r\n    }\r\n\r\n    // ================================================\r\n    // Mark Read Status\r\n    // ================================================\r\n    // markReadStatus = readStatus => {\r\n    //   this.setState({\r\n    //     messages: this.state.messages.map(\r\n    //       message =>\r\n    //       message.selected ? {...message, read: readStatus} : message\r\n    //     )\r\n    //   })\r\n    // }\r\n\r\n    // markReadStatus = async readStatus => {\r\n    //     // Filter out the selected messages\r\n    //     const selectedMessages = this.state.messages.filter(message => message.selected)\r\n    //\r\n    //     await fetch('http://localhost:8082/api/messages', {\r\n    //         method: 'PATCH',\r\n    //         body: JSON.stringify({\r\n    //             messageIds: [...selectedMessages.map(message => message.id)],\r\n    //             command: 'read',\r\n    //             read: readStatus\r\n    //         }),\r\n    //         headers: {\r\n    //             'Content-Type': 'application/json',\r\n    //             'Accept': 'application/json'\r\n    //         }\r\n    //     })\r\n    //\r\n    //     this.setState({\r\n    //         messages: this.state.messages.map(message => (message.selected ? {...message, read: readStatus} : message))\r\n    //     })\r\n    // }\r\n\r\n    // ================================================\r\n    // Add Message\r\n    // ================================================\r\n    addMessage = async (composeMessage) => {\r\n        const { subject, body } = composeMessage\r\n        const response = await fetch('http://localhost:8082/api/messages', {\r\n            method: 'POST',\r\n            body: JSON.stringify({\r\n                subject,\r\n                body\r\n            }),\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Accept': 'application/json'\r\n            }\r\n        })\r\n        const message = await response.json()\r\n        // console.log('messages==> ', this.state.messages);\r\n        // console.log('new message==> ', message);\r\n\r\n        this.setState({\r\n            messages: [\r\n                ...this.state.messages,\r\n                message\r\n            ],\r\n            display: !this.state.display\r\n        })\r\n        console.log(this.state);\r\n    }\r\n\r\n    // ================================================\r\n    // Delete Messages\r\n    // ================================================\r\n    // deleteMessages = () => {\r\n    //   const messages = this.state.messages.filter(\r\n    //     messages => !messages.selected\r\n    //   );\r\n    //   this.setState({messages})\r\n    // }\r\n\r\n    deleteMessages = async () => {\r\n        const messages = this.state.messages.filter(message => !message.selected);\r\n        // Filter out the selected messages\r\n        const selectedMessages = this.state.messages.filter(message => message.selected)\r\n\r\n        await fetch('http://localhost:8082/api/messages', {\r\n            method: 'PATCH',\r\n            body: JSON.stringify({\r\n                messageIds: [...selectedMessages.map(message => message.id)],\r\n                command: 'delete'\r\n            }),\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Accept': 'application/json'\r\n            }\r\n        })\r\n\r\n        this.setState({ messages })\r\n    }\r\n\r\n    // ================================================\r\n    // Apply Label Category\r\n    // ================================================\r\n    // applyLabel = label => {\r\n    //   const messages = this.state.messages.map(message =>\r\n    //     message.selected && !message.labels.includes(label) ?\r\n    //     {...message, labels: [...message.labels, label].sort()}\r\n    //     : message\r\n    //   );\r\n    //   this.setState({messages})\r\n    // };\r\n\r\n    applyLabel = async label => {\r\n        const messages = this.state.messages.map(message =>\r\n            message.selected && !message.labels.includes(label)\r\n                ? {...message, labels: [...message.labels, label].sort()}\r\n                : message\r\n        )\r\n        // Filter out the selected messages\r\n        const selectedMessages = this.state.messages.filter(message => message.selected)\r\n\r\n        await fetch('http://localhost:8082/api/messages', {\r\n            method: 'PATCH',\r\n            body: JSON.stringify({\r\n                messageIds: [...selectedMessages.map(message => message.id)],\r\n                command: 'addLabel',\r\n                label\r\n            }),\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Accept': 'application/json'\r\n            }\r\n        })\r\n\r\n        this.setState({ messages })\r\n    }\r\n\r\n    // ================================================\r\n    // Remove Label\r\n    // ================================================\r\n    // removeLabel = label => {\r\n    //   const messages = this.state.messages.map(\r\n    //     message => {\r\n    //       const index = message.labels.indexOf(label)\r\n    //       if (message.selected && index > -1) {\r\n    //         return {...message, labels: [\r\n    //           ...message.labels.slice(0, index),\r\n    //           ...message.labels.slice(index + 1)\r\n    //           ]\r\n    //         }\r\n    //       }\r\n    //       return message;\r\n    //     });\r\n    //   this.setState({messages})\r\n    // };\r\n\r\n    removeLabel = async label => {\r\n        const messages = this.state.messages.map(message => {\r\n            const index = message.labels.indexOf(label)\r\n            if (message.selected && index > -1) {\r\n                return {\r\n                    ...message,\r\n                    labels: [\r\n                        ...message.labels.slice(0, index),\r\n                        ...message.labels.slice(index + 1)\r\n                    ]\r\n                }\r\n            }\r\n            return message\r\n        })\r\n        // Filter out the selected messages\r\n        const selectedMessages = this.state.messages.filter(message => message.selected)\r\n\r\n        await fetch('http://localhost:8082/api/messages', {\r\n            method: 'PATCH',\r\n            body: JSON.stringify({\r\n                messageIds: [...selectedMessages.map(message => message.id)],\r\n                command: 'removeLabel',\r\n                label\r\n            }),\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Accept': 'application/json'\r\n            }\r\n        })\r\n\r\n        this.setState({ messages })\r\n    }\r\n\r\n    // ================================================\r\n    // Render\r\n    // ================================================\r\n    render() {\r\n        // console.log(this.state)\r\n        return (\r\n            <div className=\"App\">\r\n                <ToolbarComponent\r\n                    messages={this.state.messages}\r\n                    toggleCompose={this.toggleCompose}\r\n                    toggleSelectAll={this.toggleSelectAll}\r\n                    markReadStatus={this.markReadStatus}\r\n                    deleteMessages={this.deleteMessages}\r\n                    applyLabel={this.applyLabel}\r\n                    removeLabel={this.removeLabel}\r\n                />\r\n                <ComposeMessageComponent\r\n                    display={this.state.display}\r\n                    addMessage={this.addMessage}\r\n                />\r\n                <MessagesComponent\r\n                    messages={this.state.messages}\r\n                    toggleStar={this.toggleStar}\r\n                    toggleSelect={this.toggleSelect}\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Emails;\r\n"]},"metadata":{},"sourceType":"module"}