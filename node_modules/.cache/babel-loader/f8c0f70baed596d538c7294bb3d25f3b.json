{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Tshilidzi-PC/Documents/GitHub/Givee/Give-a-Lot/frontend/givealot/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/Tshilidzi-PC/Documents/GitHub/Givee/Give-a-Lot/frontend/givealot/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/Tshilidzi-PC/Documents/GitHub/Givee/Give-a-Lot/frontend/givealot/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useEffect,useState}from'react';import{useParams}from'react-router-dom';import Navbar from\"../Navbar/Navbar\";import Button from'@material-ui/core/Button';import ImageGallery from'react-image-gallery';import InstagramIcon from'@material-ui/icons/Instagram';import FacebookIcon from'@material-ui/icons/Facebook';import TwitterIcon from'@material-ui/icons/Twitter';import'../../Styles/view_organisation.css';import{Accordion,AccordionDetails,Box,TextField}from\"@material-ui/core\";import Footer from\"../Footer/Footer\";import Container from'@material-ui/core/Container';import Timeline from\"@material-ui/lab/Timeline\";import OrganisationTimeLineItem from'../OrganisationTimeLineItem/OrganisationTimeLineItem';import ExpandMoreIcon from\"@material-ui/icons/ExpandMore\";import AccordionSummary from\"@material-ui/core/AccordionSummary\";import Typography from\"@material-ui/core/Typography\";import{makeStyles}from\"@material-ui/core/styles\";import Loader from\"../../../loader/Loader\";import{ApiContext}from\"../../../../apiContext/ApiContext\";import axios from\"axios\";import{Alert}from\"@material-ui/lab\";import DialogTitle from\"@material-ui/core/DialogTitle\";import Dialog from\"@material-ui/core/Dialog\";import Chatbot from\"../../../chatbot/Chatbot\";import\"react-image-gallery/styles/css/image-gallery.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{root:{width:'100%'},heading:{fontSize:theme.typography.pxToRem(15),flexBasis:'33.33%',flexShrink:0},secondaryHeading:{fontSize:theme.typography.pxToRem(15),color:theme.palette.text.secondary}};});/*timeline*/function trim_description(descr){var summary=\"\";var complete_descr=\"\";if(descr!==undefined){if(descr.length>50){summary=\"\";var i;var upperbound=200;for(i=0;i<upperbound&&i<descr.length;i++){if(i+1===upperbound&&descr[i]!==\" \")upperbound++;summary=summary+descr[i];}summary=summary+\"[expand to read more]\";for(var k=i;k<descr.length;k++){complete_descr=complete_descr+descr[k];}}}return[summary,complete_descr];}function ViewOrganisation(){var classes=useStyles();var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),expanded=_React$useState2[0],setExpanded=_React$useState2[1];var _React$useState3=React.useState(true),_React$useState4=_slicedToArray(_React$useState3,2),pageLoaded=_React$useState4[0],setPageLoaded=_React$useState4[1];var _React$useState5=React.useState([]),_React$useState6=_slicedToArray(_React$useState5,2),organisationData=_React$useState6[0],setOrganisationData=_React$useState6[1];var _useState=useState(useContext(ApiContext)),_useState2=_slicedToArray(_useState,2),serverDomain=_useState2[0],setServerDomain=_useState2[1];var _React$useState7=React.useState(false),_React$useState8=_slicedToArray(_React$useState7,2),open=_React$useState8[0],setOpen=_React$useState8[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),timelineEvents=_useState4[0],setTimelineEvents=_useState4[1];var _useState5=useState(localStorage.getItem('id')),_useState6=_slicedToArray(_useState5,2),curr_organisation_id=_useState6[0],set_curr_organisation_id=_useState6[1];var handleChange=function handleChange(panel){return function(event,isExpanded){setExpanded(isExpanded?panel:false);};};var _useParams=useParams(),id=_useParams.id;var image_id=id+\"\";var showReportFormTrack=false;var handleClickOpen=function handleClickOpen(){setOpen(true);};var handleClose=function handleClose(){setOpen(false);};var reportOrganisation=function reportOrganisation(event){event.preventDefault();var orgId=id;var userId=localStorage.getItem(\"id\");var reportType=document.getElementById(\"report-title-input\").value;var reportDescription=document.getElementById(\"report-description-input\").value;var reportRequest={orgId:orgId,userId:userId,reportType:reportType,description:reportDescription};if(userId===null||userId===\"default\"){alert(\"please sign in if you want to report an organisation\");window.location.assign(\"/login\");}else{document.getElementById('report_wait_alert').style.display=\"flex\";document.getElementById('report_error_alert').style.display=\"none\";document.getElementById('report_server_error_alert').style.display=\"none\";axios.post(serverDomain+'/report/org/',reportRequest).then(function(response){if(response){document.getElementById('report_success_alert').style.display=\"flex\";document.getElementById('report_wait_alert').style.display=\"none\";setTimeout(function(){document.getElementById('report_success_alert').style.display=\"none\";},3000);}}).catch(function(error){document.getElementById('report_wait_alert').style.display=\"none\";if(error.response){document.getElementById('report_error_alert').style.display=\"flex\";}else{document.getElementById('report_server_error_alert').style.display=\"flex\";}});}};useEffect(function(){var tmp_selected_user;if(localStorage.getItem(\"role\")!==\"general\")tmp_selected_user=\"default\";else tmp_selected_user=localStorage.getItem(\"id\");fetch(serverDomain+\"/v1/organisation/sel/organisation/\"+id+\"/\"+tmp_selected_user).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(response){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return response.json();case 2:data=_context.sent;if(!response.ok)/* error handling here */{if(response.status===500){}else if(response.status===401){}if(typeof data!=='undefined'){}}if(data.message===\"success\")/*successfully fetched*/{setOrganisationData(data.response);setPageLoaded(true);}else{setOrganisationData([]);}case 5:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}()).catch(function(error){alert(\"failed - select - sector\");});fetch(serverDomain+\"/event/get/timeline/\"+id).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(response){var data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return response.json();case 2:data=_context2.sent;if(!response.ok)/* error handling here */{if(response.status===500){}else if(response.status===401){}if(typeof data!=='undefined'){}}if(data.message===\"success\")/*successfully fetched*/setTimelineEvents(data.object);else{}case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}()).catch(function(error){alert(\"failed - organisations - sector\");});},[]);/* fetch request - organisations by sections - end*/var description=[];description[0]=\"\";description[1]=\"\";if(organisationData!==undefined){description=trim_description(organisationData.orgDescription);}var fetched_timeline_events=[];if(timelineEvents!==undefined){for(var i=0;i<timelineEvents.length;i++){var timeline_event_date=timelineEvents[i].eventDate;var timeline_event_title=timelineEvents[i].eventTitle;var timeline_event_id=timelineEvents[i].eventId;var timeline_event_description=timelineEvents[i].eventShortDescription;fetched_timeline_events.push(/*#__PURE__*/_jsx(OrganisationTimeLineItem,{id:timeline_event_id,date:timeline_event_date,title:timeline_event_title,description:timeline_event_description}));}}var number_of_images=0;if(organisationData!==undefined){number_of_images=organisationData.numberOfImages;}var images=[];for(var _i=1;_i<number_of_images+1;_i++){var image={original:serverDomain+\"/media/version/gallery/images/\"+id+\"/\"+_i,originalClass:\"galleryOriginal\",originalHeight:310,originalWidth:400,thumbnail:serverDomain+\"/media/version/gallery/images/\"+id+\"/\"+_i,thumbnailHeight:60,thumbnailWidth:20,thumbnailClass:\"galleryThumbnail\"};images.push(image);}return/*#__PURE__*/_jsxs(\"div\",{id:\"view_organisation_container_outer\",children:[pageLoaded===false&&/*#__PURE__*/_jsx(Loader,{}),/*#__PURE__*/_jsx(Chatbot,{}),/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(Container,{maxWidth:\"xl\",id:\"view_organisation_container\",children:[/*#__PURE__*/_jsxs(Container,{maxWidth:\"sm\",id:\"view_organisation\",children:[/*#__PURE__*/_jsxs(\"div\",{id:\"view_header\",children:[/*#__PURE__*/_jsxs(\"div\",{id:\"view_organisations_card\",children:[/*#__PURE__*/_jsx(\"h1\",{children:organisationData.orgName}),/*#__PURE__*/_jsx(\"h4\",{children:organisationData.slogan})]}),/*#__PURE__*/_jsx(\"img\",{src:serverDomain+\"/v1/organisation/image/get/logo/\"+id,id:\"imageCover\"}),/*#__PURE__*/_jsxs(\"div\",{id:\"id_social_media\",children:[organisationData.istagramURl?/*#__PURE__*/_jsx(Button,{id:\"instaIcon\",size:\"small\",startIcon:/*#__PURE__*/_jsx(InstagramIcon,{}),onClick:function onClick(){window.open(organisationData.istagramURl);},children:\"instagram\"}):/*#__PURE__*/_jsx(Button,{id:\"instaIcon\",disabled:true,size:\"small\",className:\"disabledBTN\",startIcon:/*#__PURE__*/_jsx(InstagramIcon,{}),children:\"instagram\"}),organisationData.facebookUrl?/*#__PURE__*/_jsx(Button,{id:\"FacebookIcon\",size:\"small\",startIcon:/*#__PURE__*/_jsx(FacebookIcon,{}),onClick:function onClick(){window.open(organisationData.facebookUrl);},children:\"facebook\"}):/*#__PURE__*/_jsx(Button,{id:\"FacebookIcon\",disabled:true,size:\"small\",className:\"disabledBTN\",startIcon:/*#__PURE__*/_jsx(FacebookIcon,{}),children:\"facebook\"}),organisationData.twitterUrl?/*#__PURE__*/_jsx(Button,{id:\"TwitterIcon\",size:\"small\",startIcon:/*#__PURE__*/_jsx(TwitterIcon,{}),onClick:function onClick(){window.open(organisationData.twitterUrl);},children:\"twitter\"}):/*#__PURE__*/_jsx(Button,{id:\"TwitterIcon\",disabled:true,size:\"small\",className:\"disabledBTN\",startIcon:/*#__PURE__*/_jsx(TwitterIcon,{}),children:\"twitter\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"view_organisation_meta_body\",children:[/*#__PURE__*/_jsx(\"p\",{id:\"view_organisation_meta_body_about\",children:\"about us\"}),/*#__PURE__*/_jsxs(Accordion,{elevation:0,expanded:expanded==='panel1',onChange:handleChange('panel1'),children:[/*#__PURE__*/_jsx(AccordionSummary,{expandIcon:/*#__PURE__*/_jsx(ExpandMoreIcon,{}),\"aria-controls\":\"panel1bh-content\",id:\"panel1bh-header\",children:/*#__PURE__*/_jsx(Typography,{className:classes.secondaryHeading,children:description[0]})}),/*#__PURE__*/_jsx(AccordionDetails,{children:/*#__PURE__*/_jsx(Typography,{children:description[1]})})]})]}),images.length>0?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{id:\"view_organisation_meta_body_about\",children:\"gallery\"}),/*#__PURE__*/_jsxs(\"div\",{id:\"view_organisation_gallery\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[images.length,\" pictures\"]}),/*#__PURE__*/_jsx(ImageGallery,{showFullscreenButton:false,showPlayButton:false,showIndex:true,autoPlay:true,items:images})]})]}):/*#__PURE__*/_jsx(_Fragment,{})]}),/*#__PURE__*/_jsxs(Container,{maxWidth:\"sm\",id:\"view_organisation_right\",children:[/*#__PURE__*/_jsxs(Box,{maxWidth:500,id:\"certificate_container\",color:\"text.primary\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{id:\"view_header_meta_content\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"p\",{children:\"Certificate level\"})}),/*#__PURE__*/_jsx(\"img\",{src:\"https://avatars.dicebear.com/api/initials/\"+organisationData.certificateLevel+\".svg?w=500\"})]}),/*#__PURE__*/_jsxs(Box,{id:\"donateSection\",children:[/*#__PURE__*/_jsx(\"img\",{src:serverDomain+\"/media/version/qr_code/\"+id,width:128,height:128}),organisationData.donationLink?/*#__PURE__*/_jsx(Button,{variant:\"contained\",children:\"donate\"}):/*#__PURE__*/_jsx(Button,{variant:\"contained\",disabled:true,className:\"disabledBTN\",children:\"donate\"})]})]}),/*#__PURE__*/_jsxs(\"p\",{id:\"certificate_award_message\",children:[\"The following certificate was awarded by Give A Lot to \",/*#__PURE__*/_jsx(\"em\",{children:organisationData.orgName}),\" upon reviewing their organisation and the information they provided to Give A Lot.\"]}),/*#__PURE__*/_jsx(\"img\",{src:serverDomain+\"/media/version/cert_png/\"+id}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"secondary\",onClick:function onClick(e){e.preventDefault();window.open(serverDomain+'/certificate/download/'+id);},children:\"Download certificate\"})]}),/*#__PURE__*/_jsxs(Box,{id:\"report_organisation_container\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Your satisfaction matters to us, report an organisation if you have any suspicions.\"}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",color:\"secondary\"/*onClick={reportFormToggle}*/,onClick:handleClickOpen,children:\"Report\"}),/*#__PURE__*/_jsxs(Dialog,{open:open,onClose:handleClose,\"aria-labelledby\":\"form-dialog-title\",children:[/*#__PURE__*/_jsx(DialogTitle,{id:\"report_organisation_heading_browse\",children:\"please complete your report\"}),/*#__PURE__*/_jsxs(Box,{id:\"report_form_container\",children:[/*#__PURE__*/_jsx(Alert,{id:\"report_success_alert\",severity:\"success\",children:\"successfully reported\"}),/*#__PURE__*/_jsx(Alert,{id:\"report_wait_alert\",severity:\"info\",children:\"please wait...\"}),/*#__PURE__*/_jsx(Alert,{id:\"report_error_alert\",severity:\"error\",children:\"all fields are required!!!\"}),/*#__PURE__*/_jsx(Alert,{id:\"report_server_error_alert\",severity:\"error\",children:\"server error :-(\"}),/*#__PURE__*/_jsx(TextField,{className:\"report_form_input\",id:\"report-title-input\",variant:\"outlined\",label:\"What is your accusation?\",placeholder:\"example, imposter\",type:\"text\"}),/*#__PURE__*/_jsx(TextField,{className:\"report_form_input\",variant:\"outlined\",id:\"report-description-input\",label:\"describe the event\",placeholder:\"Describe the accusation in detail\",maxRows:3,multiline:true}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",class:\"g-recaptcha\",\"data-sitekey\":\"reCAPTCHA_site_key\",\"data-action\":\"submit\",\"data-callback\":\"reportOrganisation\",onClick:reportOrganisation,children:\"submit\"})]})]})]}),/*#__PURE__*/_jsx(\"p\",{id:\"view_organisation_meta_body_about\",children:\"timeline\"}),/*#__PURE__*/_jsx(Box,{id:\"organisation_timeline\",children:/*#__PURE__*/_jsx(Timeline,{align:\"alternate\",children:fetched_timeline_events})})]})]}),/*#__PURE__*/_jsx(Footer,{})]});}export default ViewOrganisation;","map":{"version":3,"sources":["C:/Users/Tshilidzi-PC/Documents/GitHub/Givee/Give-a-Lot/frontend/givealot/src/views/browse/Components/Organisation/ViewOrganisation.js"],"names":["React","useContext","useEffect","useState","useParams","Navbar","Button","ImageGallery","InstagramIcon","FacebookIcon","TwitterIcon","Accordion","AccordionDetails","Box","TextField","Footer","Container","Timeline","OrganisationTimeLineItem","ExpandMoreIcon","AccordionSummary","Typography","makeStyles","Loader","ApiContext","axios","Alert","DialogTitle","Dialog","Chatbot","useStyles","theme","root","width","heading","fontSize","typography","pxToRem","flexBasis","flexShrink","secondaryHeading","color","palette","text","secondary","trim_description","descr","summary","complete_descr","undefined","length","i","upperbound","k","ViewOrganisation","classes","expanded","setExpanded","pageLoaded","setPageLoaded","organisationData","setOrganisationData","serverDomain","setServerDomain","open","setOpen","timelineEvents","setTimelineEvents","localStorage","getItem","curr_organisation_id","set_curr_organisation_id","handleChange","panel","event","isExpanded","id","image_id","showReportFormTrack","handleClickOpen","handleClose","reportOrganisation","preventDefault","orgId","userId","reportType","document","getElementById","value","reportDescription","reportRequest","description","alert","window","location","assign","style","display","post","then","response","setTimeout","catch","error","tmp_selected_user","fetch","json","data","ok","status","message","object","orgDescription","fetched_timeline_events","timeline_event_date","eventDate","timeline_event_title","eventTitle","timeline_event_id","eventId","timeline_event_description","eventShortDescription","push","number_of_images","numberOfImages","images","image","original","originalClass","originalHeight","originalWidth","thumbnail","thumbnailHeight","thumbnailWidth","thumbnailClass","orgName","slogan","istagramURl","facebookUrl","twitterUrl","certificateLevel","donationLink","e"],"mappings":"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","sourcesContent":["import React, {useContext, useEffect, useState} from 'react';\r\nimport {useParams} from 'react-router-dom';\r\nimport Navbar from \"../Navbar/Navbar\";\r\nimport Button from '@material-ui/core/Button';\r\nimport ImageGallery from 'react-image-gallery';\r\n\r\n\r\nimport InstagramIcon from '@material-ui/icons/Instagram';\r\nimport FacebookIcon from '@material-ui/icons/Facebook';\r\nimport TwitterIcon from '@material-ui/icons/Twitter';\r\n\r\nimport '../../Styles/view_organisation.css';\r\nimport {Accordion, AccordionDetails,Box, TextField} from \"@material-ui/core\";\r\nimport Footer from \"../Footer/Footer\";\r\nimport Container from '@material-ui/core/Container';\r\n\r\nimport Timeline from \"@material-ui/lab/Timeline\";\r\nimport OrganisationTimeLineItem from '../OrganisationTimeLineItem/OrganisationTimeLineItem'\r\n\r\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\r\nimport AccordionSummary from \"@material-ui/core/AccordionSummary\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport {makeStyles} from \"@material-ui/core/styles\";\r\nimport Loader from \"../../../loader/Loader\";\r\nimport {ApiContext} from \"../../../../apiContext/ApiContext\";\r\nimport axios from \"axios\";\r\nimport {Alert} from \"@material-ui/lab\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport Chatbot from \"../../../chatbot/Chatbot\";\r\nimport \"react-image-gallery/styles/css/image-gallery.css\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        width: '100%',\r\n    },\r\n    heading: {\r\n        fontSize: theme.typography.pxToRem(15),\r\n        flexBasis: '33.33%',\r\n        flexShrink: 0,\r\n    },\r\n    secondaryHeading: {\r\n        fontSize: theme.typography.pxToRem(15),\r\n        color: theme.palette.text.secondary,\r\n    },\r\n}));\r\n\r\n\r\n/*timeline*/\r\n\r\nfunction trim_description(descr)\r\n{\r\n    let summary = \"\";\r\n    let complete_descr = \"\";\r\n    if(descr !== undefined) {\r\n        if (descr.length > 50) {\r\n            summary = \"\";\r\n            let i;\r\n            let upperbound = 200;\r\n            for (i = 0; i < upperbound && i < descr.length; i++) {\r\n                if (i + 1 === upperbound && descr[i] !== \" \")\r\n                    upperbound++;\r\n                summary = summary + descr[i];\r\n            }\r\n\r\n            summary = summary + \"[expand to read more]\";\r\n\r\n            for (let k = i; k < descr.length; k++) {\r\n                complete_descr = complete_descr + descr[k];\r\n            }\r\n\r\n        }\r\n    }\r\n    return [summary, complete_descr];\r\n}\r\nfunction ViewOrganisation()\r\n{\r\n    const classes = useStyles();\r\n    const [expanded, setExpanded] = React.useState(false);\r\n    const [pageLoaded, setPageLoaded] = React.useState(true);\r\n    const [organisationData, setOrganisationData] = React.useState([]);\r\n    const [serverDomain, setServerDomain] = useState(useContext(ApiContext))\r\n    const [open, setOpen] = React.useState(false);\r\n\r\n    let [timelineEvents, setTimelineEvents] = useState([]);\r\n    let [curr_organisation_id, set_curr_organisation_id] = useState(localStorage.getItem('id'));\r\n\r\n    const handleChange = (panel) => (event, isExpanded) => {\r\n        setExpanded(isExpanded ? panel : false);\r\n    };\r\n\r\n    let {id} = useParams();\r\n    let image_id = id + \"\";\r\n    let showReportFormTrack = false;\r\n\r\n    const handleClickOpen = () => {\r\n        setOpen(true);\r\n    };\r\n\r\n    const handleClose = () => {\r\n        setOpen(false);\r\n    };\r\n\r\n    const reportOrganisation = event =>\r\n    {\r\n        event.preventDefault();\r\n        let orgId = id;\r\n        let userId = localStorage.getItem(\"id\");\r\n        let reportType = document.getElementById(\"report-title-input\").value;\r\n        let reportDescription = document.getElementById(\"report-description-input\").value;\r\n\r\n        let reportRequest = {\r\n            orgId : orgId,\r\n            userId : userId,\r\n            reportType : reportType,\r\n            description : reportDescription\r\n        }\r\n\r\n        if(userId === null || userId === \"default\")\r\n        {\r\n            alert(\"please sign in if you want to report an organisation\");\r\n            window.location.assign(\"/login\");\r\n        }\r\n        else\r\n        {\r\n            document.getElementById('report_wait_alert').style.display = \"flex\";\r\n            document.getElementById('report_error_alert').style.display = \"none\";\r\n            document.getElementById('report_server_error_alert').style.display = \"none\";\r\n            axios.post(serverDomain + '/report/org/', reportRequest)\r\n            .then(response =>\r\n            {\r\n                if(response)\r\n                {\r\n                    document.getElementById('report_success_alert').style.display = \"flex\";\r\n                    document.getElementById('report_wait_alert').style.display = \"none\";\r\n                    setTimeout(function(){\r\n                        document.getElementById('report_success_alert').style.display = \"none\";\r\n                    }, 3000);\r\n                }\r\n            })\r\n            .catch(error =>\r\n            {\r\n                document.getElementById('report_wait_alert').style.display = \"none\";\r\n                if(error.response)\r\n                {\r\n                    document.getElementById('report_error_alert').style.display = \"flex\";\r\n                }\r\n                else\r\n                {\r\n                    document.getElementById('report_server_error_alert').style.display = \"flex\";\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n\r\n            let tmp_selected_user;\r\n            if(localStorage.getItem(\"role\") !== \"general\")\r\n                tmp_selected_user = \"default\";\r\n            else tmp_selected_user = localStorage.getItem(\"id\");\r\n\r\n            fetch( serverDomain + \"/v1/organisation/sel/organisation/\" + id + \"/\" + tmp_selected_user)\r\n            .then(async response =>\r\n            {\r\n                const data = await response.json();\r\n\r\n                if (!response.ok) /* error handling here */\r\n                {\r\n                    if (response.status === 500) {\r\n                    } else if (response.status === 401) {\r\n                    }\r\n                    if (typeof data !== 'undefined') {\r\n                    }\r\n                }\r\n\r\n                if (data.message === \"success\") /*successfully fetched*/\r\n                {\r\n                    setOrganisationData(data.response);\r\n                    setPageLoaded(true);\r\n                }\r\n                else\r\n                {\r\n                    setOrganisationData([]);\r\n                }\r\n            })\r\n\r\n            .catch(error => {\r\n                alert(\"failed - select - sector\")\r\n            });\r\n\r\n            fetch( serverDomain + \"/event/get/timeline/\" + id)\r\n                .then(async response =>{\r\n\r\n                    const data = await response.json();\r\n\r\n                    if(!response.ok) /* error handling here */\r\n                    {\r\n                        if(response.status === 500)\r\n                        {}\r\n                        else if(response.status === 401)\r\n                        {}\r\n\r\n                        if(typeof data !== 'undefined')\r\n                        {}\r\n                    }\r\n\r\n                    if(data.message === \"success\") /*successfully fetched*/\r\n                        setTimelineEvents(data.object)\r\n                    else\r\n                    {}\r\n                })\r\n\r\n                .catch(error => {\r\n                    alert(\"failed - organisations - sector\")\r\n                });\r\n        }\r\n        ,[])\r\n    /* fetch request - organisations by sections - end*/\r\n\r\n\r\n\r\n    let description = [];\r\n    description[0] = \"\";\r\n    description[1] = \"\";\r\n\r\n    if(organisationData !== undefined)\r\n    {\r\n        description = trim_description(organisationData.orgDescription);\r\n    }\r\n\r\n    let fetched_timeline_events = [];\r\n    if(timelineEvents !== undefined)\r\n    {\r\n        for (let i = 0; i < timelineEvents.length; i++)\r\n        {\r\n            let timeline_event_date = timelineEvents[i].eventDate;\r\n            let timeline_event_title = timelineEvents[i].eventTitle;\r\n            let timeline_event_id = timelineEvents[i].eventId;\r\n            let timeline_event_description = timelineEvents[i].eventShortDescription;\r\n\r\n            fetched_timeline_events.push(\r\n                <OrganisationTimeLineItem id={timeline_event_id}\r\n                                          date={timeline_event_date}\r\n                                          title={timeline_event_title}\r\n                                          description={timeline_event_description}\r\n                />\r\n            )\r\n        }\r\n    }\r\n\r\n    let number_of_images = 0;\r\n    if(organisationData !== undefined)\r\n    {\r\n        number_of_images = organisationData.numberOfImages;\r\n\r\n    }\r\n\r\n    let images = [];\r\n\r\n    for(let i = 1; i < number_of_images+1; i++)\r\n    {\r\n        let image = {\r\n            original : serverDomain + \"/media/version/gallery/images/\"+id+\"/\" + i,\r\n            originalClass: \"galleryOriginal\",\r\n            originalHeight: 310,\r\n            originalWidth: 400,\r\n            thumbnail: serverDomain + \"/media/version/gallery/images/\"+id+\"/\" + i,\r\n            thumbnailHeight: 60,\r\n            thumbnailWidth: 20,\r\n\r\n            thumbnailClass: \"galleryThumbnail\"\r\n        }\r\n        images.push(image);\r\n    }\r\n\r\n    return (\r\n       <div id={\"view_organisation_container_outer\"}>\r\n           {pageLoaded === false && <Loader />}\r\n           <Chatbot />\r\n           <Navbar/>\r\n           <Container maxWidth={\"xl\"}  id=\"view_organisation_container\">\r\n               <Container maxWidth={\"sm\"} id=\"view_organisation\">\r\n                   <div id=\"view_header\">\r\n                       <div id=\"view_organisations_card\">\r\n                           <h1>{organisationData.orgName}</h1>\r\n                           <h4>{organisationData.slogan}</h4>\r\n                       </div>\r\n\r\n                       <img src={ serverDomain + \"/v1/organisation/image/get/logo/\" + id} id={\"imageCover\"}/>\r\n\r\n                       <div id={\"id_social_media\"}>\r\n                           {organisationData.istagramURl ?\r\n                               <Button id={\"instaIcon\"} size={\"small\"} startIcon={<InstagramIcon/>}\r\n                                    onClick={() => {\r\n                                        window.open(organisationData.istagramURl);\r\n                                    }}>\r\n                               instagram\r\n                           </Button>\r\n                               :\r\n                               <Button id={\"instaIcon\"}\r\n                                       disabled\r\n                                       size={\"small\"}\r\n                                       className={\"disabledBTN\"}\r\n                                       startIcon={<InstagramIcon/>}>\r\n                                   instagram\r\n                               </Button>\r\n                           }\r\n\r\n                           {organisationData.facebookUrl ?\r\n                               <Button id={\"FacebookIcon\"}\r\n                                       size={\"small\"}\r\n                                       startIcon={<FacebookIcon/>}\r\n                                        onClick={() => {\r\n                                            window.open(organisationData.facebookUrl);\r\n                                        }}>\r\n                                    facebook\r\n                               </Button>\r\n                               :\r\n                               <Button id={\"FacebookIcon\"}\r\n                                       disabled\r\n                                       size={\"small\"}\r\n                                       className={\"disabledBTN\"}\r\n                                       startIcon={<FacebookIcon/>}>\r\n                                    facebook\r\n                               </Button>\r\n                           }\r\n\r\n                           {organisationData.twitterUrl ?\r\n                               <Button id={\"TwitterIcon\"} size={\"small\"} startIcon={<TwitterIcon/>}\r\n                                    onClick={() => {\r\n                                        window.open(organisationData.twitterUrl);\r\n                                    }}>\r\n                                  twitter\r\n                               </Button>\r\n                               :\r\n                               <Button id={\"TwitterIcon\"}\r\n                                       disabled\r\n                                       size={\"small\"}\r\n                                       className={\"disabledBTN\"}\r\n                                       startIcon={<TwitterIcon/>}>\r\n                                   twitter\r\n                               </Button>\r\n                           }\r\n                       </div>\r\n                   </div>\r\n\r\n                   <div id=\"view_organisation_meta_body\">\r\n                       <p id=\"view_organisation_meta_body_about\">about us</p>\r\n\r\n                       <Accordion elevation={0} expanded={expanded === 'panel1'} onChange={handleChange('panel1')}>\r\n                           <AccordionSummary\r\n                               expandIcon={<ExpandMoreIcon />}\r\n                               aria-controls=\"panel1bh-content\"\r\n                               id=\"panel1bh-header\"\r\n                           >\r\n                               {/*  <Typography className={classes.heading}>General settings</Typography> */}\r\n                               <Typography className={classes.secondaryHeading}>{description[0]}</Typography>\r\n                           </AccordionSummary>\r\n                           <AccordionDetails>\r\n                               <Typography>\r\n                                   {description[1]}\r\n                               </Typography>\r\n                           </AccordionDetails>\r\n                       </Accordion>\r\n                   </div>\r\n\r\n                   {images.length > 0 ?\r\n                       <>\r\n                           <p id=\"view_organisation_meta_body_about\">gallery</p>\r\n                           <div id=\"view_organisation_gallery\">\r\n                           <p>{images.length} pictures</p>\r\n                           <ImageGallery\r\n                               showFullscreenButton={false}\r\n                               showPlayButton={false}\r\n                               showIndex={true}\r\n                               autoPlay={true}\r\n                               items={images}/>\r\n                           </div>\r\n                       </>\r\n\r\n                       :\r\n\r\n                       <></>\r\n                   }\r\n\r\n               </Container>\r\n\r\n               <Container maxWidth=\"sm\" id=\"view_organisation_right\">\r\n                   <Box maxWidth={500} id=\"certificate_container\" color=\"text.primary\">\r\n                       <div>\r\n                           <div id={\"view_header_meta_content\"}>\r\n                               <div><p>Certificate level</p></div>\r\n                               <img src={\"https://avatars.dicebear.com/api/initials/\" + organisationData.certificateLevel + \".svg?w=500\"} />\r\n                           </div>\r\n\r\n                           <Box id={\"donateSection\"}>\r\n                               <img src={serverDomain + \"/media/version/qr_code/\" + id} width={128} height={128}/>\r\n\r\n                               {\r\n                                   organisationData.donationLink ?\r\n                                       <Button variant={\"contained\"}>donate</Button>\r\n\r\n                                       :\r\n\r\n                                       <Button variant={\"contained\"}\r\n                                               disabled\r\n                                               className={\"disabledBTN\"}>donate</Button>\r\n                               }\r\n\r\n                           </Box>\r\n                       </div>\r\n\r\n                       <p id={\"certificate_award_message\"}>\r\n                          The following certificate was awarded by Give A Lot to <em>{organisationData.orgName}</em> upon reviewing\r\n                          their organisation and the information they provided to Give A Lot.\r\n                       </p>\r\n\r\n                       <img src={serverDomain + \"/media/version/cert_png/\" + id}  />\r\n\r\n                       <Button variant=\"contained\" color=\"secondary\"\r\n                               onClick={(e) => {\r\n                                   e.preventDefault();\r\n                                   window.open(serverDomain +'/certificate/download/' + id);\r\n                               }}\r\n                       >\r\n                           Download certificate\r\n                       </Button>\r\n                   </Box>\r\n\r\n\r\n                   <Box id={\"report_organisation_container\"}>\r\n                       <p>\r\n                           Your satisfaction matters to us,\r\n                           report an organisation if you have any suspicions.\r\n                       </p>\r\n                       <Button\r\n                        variant={\"outlined\"}\r\n                        color={\"secondary\"}\r\n                        /*onClick={reportFormToggle}*/\r\n                           onClick={handleClickOpen}\r\n                       >\r\n                           Report\r\n                       </Button>\r\n                       <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\r\n                           <DialogTitle id=\"report_organisation_heading_browse\">please complete your report</DialogTitle>\r\n                           <Box id={\"report_form_container\"}>\r\n\r\n                               <Alert\r\n                                   id={\"report_success_alert\"}\r\n                                   severity={\"success\"}\r\n                               >\r\n                                   successfully reported\r\n                               </Alert>\r\n\r\n                               <Alert\r\n                                   id={\"report_wait_alert\"}\r\n                                   severity={\"info\"}\r\n                               >\r\n                                   please wait...\r\n                               </Alert>\r\n\r\n                               <Alert\r\n                                   id={\"report_error_alert\"}\r\n                                   severity={\"error\"}\r\n                               >\r\n                                   all fields are required!!!\r\n                               </Alert>\r\n\r\n                               <Alert\r\n                                   id={\"report_server_error_alert\"}\r\n                                   severity={\"error\"}\r\n                               >\r\n                                   server error :-(\r\n                               </Alert>\r\n\r\n                               <TextField\r\n                                   className={\"report_form_input\"}\r\n                                   id={\"report-title-input\"}\r\n                                   variant={\"outlined\"}\r\n                                   label=\"What is your accusation?\"\r\n                                   placeholder={\"example, imposter\"}\r\n                                   type=\"text\"\r\n                               />\r\n\r\n                               <TextField\r\n                                   className={\"report_form_input\"}\r\n                                   variant={\"outlined\"}\r\n                                   id={\"report-description-input\"}\r\n                                   label=\"describe the event\"\r\n                                   placeholder=\"Describe the accusation in detail\"\r\n                                   maxRows={3}\r\n                                   multiline\r\n                               />\r\n\r\n                               <Button\r\n                                   variant={\"contained\"}\r\n                                   color={\"primary\"}\r\n                                   class=\"g-recaptcha\"\r\n                                   data-sitekey=\"reCAPTCHA_site_key\"\r\n                                   data-action='submit'\r\n                                   data-callback='reportOrganisation'\r\n                                   onClick={reportOrganisation}\r\n\r\n                               >\r\n                                   submit\r\n                               </Button>\r\n                           </Box>\r\n                       </Dialog>\r\n\r\n\r\n                   </Box>\r\n\r\n                   <p id=\"view_organisation_meta_body_about\">timeline</p>\r\n\r\n                   <Box id={\"organisation_timeline\"}>\r\n                        <Timeline align=\"alternate\">\r\n                            {fetched_timeline_events}\r\n                        </Timeline>\r\n                   </Box>\r\n               </Container>\r\n           </Container>\r\n            <Footer />\r\n       </div>\r\n    )\r\n}\r\n\r\nexport default ViewOrganisation;\r\n"]},"metadata":{},"sourceType":"module"}